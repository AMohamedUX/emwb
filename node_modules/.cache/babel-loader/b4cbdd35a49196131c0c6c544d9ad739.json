{"ast":null,"code":"import _classCallCheck from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport React, { PureComponent, createRef, Children } from 'react';\nimport { findFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { isElementOfType, wrapWithComponent } from '../../../../utilities/components.js';\nimport { Key } from '../../../../types.js';\nimport { overlay } from '../../../shared.js';\nimport styles from '../../Popover.scss.js';\nimport { KeypressListener } from '../../../KeypressListener/KeypressListener.js';\nimport { PositionedOverlay } from '../../../PositionedOverlay/PositionedOverlay.js';\nimport { Pane } from '../Pane/Pane.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nimport { CustomProperties } from '../../../CustomProperties/CustomProperties.js';\nimport { tokens } from '../../../../tokens/tokens.js';\nvar PopoverCloseSource;\n\n(function (PopoverCloseSource) {\n  PopoverCloseSource[PopoverCloseSource[\"Click\"] = 0] = \"Click\";\n  PopoverCloseSource[PopoverCloseSource[\"EscapeKeypress\"] = 1] = \"EscapeKeypress\";\n  PopoverCloseSource[PopoverCloseSource[\"FocusOut\"] = 2] = \"FocusOut\";\n  PopoverCloseSource[PopoverCloseSource[\"ScrollOut\"] = 3] = \"ScrollOut\";\n})(PopoverCloseSource || (PopoverCloseSource = {}));\n\nvar TransitionStatus;\n\n(function (TransitionStatus) {\n  TransitionStatus[\"Entering\"] = \"entering\";\n  TransitionStatus[\"Entered\"] = \"entered\";\n  TransitionStatus[\"Exiting\"] = \"exiting\";\n  TransitionStatus[\"Exited\"] = \"exited\";\n})(TransitionStatus || (TransitionStatus = {}));\n\nvar PopoverOverlay = /*#__PURE__*/function (_PureComponent) {\n  _inherits(PopoverOverlay, _PureComponent);\n\n  var _super = _createSuper(PopoverOverlay);\n\n  function PopoverOverlay(props) {\n    var _this;\n\n    _classCallCheck(this, PopoverOverlay);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      transitionStatus: _this.props.active ? TransitionStatus.Entering : TransitionStatus.Exited\n    };\n    _this.contentNode = /*#__PURE__*/createRef();\n    _this.enteringTimer = void 0;\n    _this.exitingTimer = void 0;\n    _this.overlayRef = void 0;\n\n    _this.renderPopover = function (overlayDetails) {\n      var measuring = overlayDetails.measuring,\n          desiredHeight = overlayDetails.desiredHeight,\n          positioning = overlayDetails.positioning;\n      var _this$props = _this.props,\n          id = _this$props.id,\n          children = _this$props.children,\n          sectioned = _this$props.sectioned,\n          fullWidth = _this$props.fullWidth,\n          fullHeight = _this$props.fullHeight,\n          fluidContent = _this$props.fluidContent,\n          hideOnPrint = _this$props.hideOnPrint,\n          colorScheme = _this$props.colorScheme,\n          autofocusTarget = _this$props.autofocusTarget;\n      var className = classNames(styles.Popover, positioning === 'above' && styles.positionedAbove, fullWidth && styles.fullWidth, measuring && styles.measuring, hideOnPrint && styles['PopoverOverlay-hideOnPrint']);\n      var contentStyles = measuring ? undefined : {\n        height: desiredHeight\n      };\n      var contentClassNames = classNames(styles.Content, fullHeight && styles['Content-fullHeight'], fluidContent && styles['Content-fluidContent']);\n      var content = /*#__PURE__*/React.createElement(\"div\", {\n        id: id,\n        tabIndex: autofocusTarget === 'none' ? undefined : -1,\n        className: contentClassNames,\n        style: contentStyles,\n        ref: _this.contentNode\n      }, renderPopoverContent(children, {\n        sectioned: sectioned\n      }));\n      return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n        className: className\n      }, overlay.props), /*#__PURE__*/React.createElement(EventListener, {\n        event: \"click\",\n        handler: _this.handleClick\n      }), /*#__PURE__*/React.createElement(EventListener, {\n        event: \"touchstart\",\n        handler: _this.handleClick\n      }), /*#__PURE__*/React.createElement(KeypressListener, {\n        keyCode: Key.Escape,\n        handler: _this.handleEscape\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.FocusTracker // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        ,\n        tabIndex: 0,\n        onFocus: _this.handleFocusFirstItem\n      }), /*#__PURE__*/React.createElement(CustomProperties, {\n        colorScheme: colorScheme\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.Wrapper\n      }, content)), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.FocusTracker // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        ,\n        tabIndex: 0,\n        onFocus: _this.handleFocusLastItem\n      }));\n    };\n\n    _this.handleClick = function (event) {\n      var target = event.target;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          contentNode = _assertThisInitialize.contentNode,\n          _assertThisInitialize2 = _assertThisInitialize.props,\n          activator = _assertThisInitialize2.activator,\n          onClose = _assertThisInitialize2.onClose;\n\n      var isDescendant = contentNode.current != null && nodeContainsDescendant(contentNode.current, target);\n      var isActivatorDescendant = nodeContainsDescendant(activator, target);\n\n      if (isDescendant || isActivatorDescendant || _this.state.transitionStatus !== TransitionStatus.Entered) {\n        return;\n      }\n\n      onClose(PopoverCloseSource.Click);\n    };\n\n    _this.handleScrollOut = function () {\n      _this.props.onClose(PopoverCloseSource.ScrollOut);\n    };\n\n    _this.handleEscape = function () {\n      _this.props.onClose(PopoverCloseSource.EscapeKeypress);\n    };\n\n    _this.handleFocusFirstItem = function () {\n      _this.props.onClose(PopoverCloseSource.FocusOut);\n    };\n\n    _this.handleFocusLastItem = function () {\n      _this.props.onClose(PopoverCloseSource.FocusOut);\n    };\n\n    _this.overlayRef = /*#__PURE__*/createRef();\n    return _this;\n  }\n\n  _createClass(PopoverOverlay, [{\n    key: \"forceUpdatePosition\",\n    value: function forceUpdatePosition() {\n      var _this$overlayRef$curr;\n\n      (_this$overlayRef$curr = this.overlayRef.current) === null || _this$overlayRef$curr === void 0 ? void 0 : _this$overlayRef$curr.forceUpdatePosition();\n    }\n  }, {\n    key: \"changeTransitionStatus\",\n    value: function changeTransitionStatus(transitionStatus, cb) {\n      this.setState({\n        transitionStatus: transitionStatus\n      }, cb); // Forcing a reflow to enable the animation\n\n      this.contentNode.current && this.contentNode.current.getBoundingClientRect();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.active) {\n        this.focusContent();\n        this.changeTransitionStatus(TransitionStatus.Entered);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(oldProps) {\n      var _this2 = this;\n\n      if (this.props.active && !oldProps.active) {\n        this.focusContent();\n        this.changeTransitionStatus(TransitionStatus.Entering, function () {\n          _this2.clearTransitionTimeout();\n\n          _this2.enteringTimer = window.setTimeout(function () {\n            _this2.setState({\n              transitionStatus: TransitionStatus.Entered\n            });\n          }, parseInt(tokens.motion['duration-100'], 10));\n        });\n      }\n\n      if (!this.props.active && oldProps.active) {\n        this.changeTransitionStatus(TransitionStatus.Exiting, function () {\n          _this2.clearTransitionTimeout();\n\n          _this2.exitingTimer = window.setTimeout(function () {\n            _this2.setState({\n              transitionStatus: TransitionStatus.Exited\n            });\n          }, parseInt(tokens.motion['duration-100'], 10));\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearTransitionTimeout();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          active = _this$props2.active,\n          activator = _this$props2.activator,\n          fullWidth = _this$props2.fullWidth,\n          _this$props2$preferre = _this$props2.preferredPosition,\n          preferredPosition = _this$props2$preferre === void 0 ? 'below' : _this$props2$preferre,\n          _this$props2$preferre2 = _this$props2.preferredAlignment,\n          preferredAlignment = _this$props2$preferre2 === void 0 ? 'center' : _this$props2$preferre2,\n          _this$props2$preferIn = _this$props2.preferInputActivator,\n          preferInputActivator = _this$props2$preferIn === void 0 ? true : _this$props2$preferIn,\n          fixed = _this$props2.fixed,\n          zIndexOverride = _this$props2.zIndexOverride;\n      var transitionStatus = this.state.transitionStatus;\n      if (transitionStatus === TransitionStatus.Exited && !active) return null;\n      var className = classNames(styles.PopoverOverlay, transitionStatus === TransitionStatus.Entering && styles['PopoverOverlay-entering'], transitionStatus === TransitionStatus.Entered && styles['PopoverOverlay-open'], transitionStatus === TransitionStatus.Exiting && styles['PopoverOverlay-exiting']);\n      return /*#__PURE__*/React.createElement(PositionedOverlay, {\n        ref: this.overlayRef,\n        fullWidth: fullWidth,\n        active: active,\n        activator: activator,\n        preferInputActivator: preferInputActivator,\n        preferredPosition: preferredPosition,\n        preferredAlignment: preferredAlignment,\n        render: this.renderPopover.bind(this),\n        fixed: fixed,\n        onScrollOut: this.handleScrollOut,\n        classNames: className,\n        zIndexOverride: zIndexOverride\n      });\n    }\n  }, {\n    key: \"clearTransitionTimeout\",\n    value: function clearTransitionTimeout() {\n      if (this.enteringTimer) {\n        window.clearTimeout(this.enteringTimer);\n      }\n\n      if (this.exitingTimer) {\n        window.clearTimeout(this.exitingTimer);\n      }\n    }\n  }, {\n    key: \"focusContent\",\n    value: function focusContent() {\n      var _this3 = this;\n\n      var _this$props$autofocus = this.props.autofocusTarget,\n          autofocusTarget = _this$props$autofocus === void 0 ? 'container' : _this$props$autofocus;\n\n      if (autofocusTarget === 'none' || this.contentNode == null) {\n        return;\n      }\n\n      requestAnimationFrame(function () {\n        if (_this3.contentNode.current == null) {\n          return;\n        }\n\n        var focusableChild = findFirstFocusableNode(_this3.contentNode.current);\n\n        if (focusableChild && autofocusTarget === 'first-node') {\n          focusableChild.focus({\n            preventScroll: process.env.NODE_ENV === 'development'\n          });\n        } else {\n          _this3.contentNode.current.focus({\n            preventScroll: process.env.NODE_ENV === 'development'\n          });\n        }\n      });\n    } // eslint-disable-next-line @shopify/react-no-multiple-render-methods\n\n  }]);\n\n  return PopoverOverlay;\n}(PureComponent);\n\nfunction renderPopoverContent(children, props) {\n  var childrenArray = Children.toArray(children);\n\n  if (isElementOfType(childrenArray[0], Pane)) {\n    return childrenArray;\n  }\n\n  return wrapWithComponent(childrenArray, Pane, props);\n}\n\nfunction nodeContainsDescendant(rootNode, descendant) {\n  if (rootNode === descendant) {\n    return true;\n  }\n\n  var parent = descendant.parentNode;\n\n  while (parent != null) {\n    if (parent === rootNode) {\n      return true;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n}\n\nexport { PopoverCloseSource, PopoverOverlay, nodeContainsDescendant };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/Popover/components/PopoverOverlay/PopoverOverlay.js"],"names":["React","PureComponent","createRef","Children","findFirstFocusableNode","classNames","isElementOfType","wrapWithComponent","Key","overlay","styles","KeypressListener","PositionedOverlay","Pane","EventListener","CustomProperties","tokens","PopoverCloseSource","TransitionStatus","PopoverOverlay","props","state","transitionStatus","active","Entering","Exited","contentNode","enteringTimer","exitingTimer","overlayRef","renderPopover","overlayDetails","measuring","desiredHeight","positioning","id","children","sectioned","fullWidth","fullHeight","fluidContent","hideOnPrint","colorScheme","autofocusTarget","className","Popover","positionedAbove","contentStyles","undefined","height","contentClassNames","Content","content","createElement","tabIndex","style","ref","renderPopoverContent","Object","assign","event","handler","handleClick","keyCode","Escape","handleEscape","FocusTracker","onFocus","handleFocusFirstItem","Wrapper","handleFocusLastItem","target","activator","onClose","isDescendant","current","nodeContainsDescendant","isActivatorDescendant","Entered","Click","handleScrollOut","ScrollOut","EscapeKeypress","FocusOut","_this$overlayRef$curr","forceUpdatePosition","cb","setState","getBoundingClientRect","focusContent","changeTransitionStatus","oldProps","clearTransitionTimeout","window","setTimeout","parseInt","motion","Exiting","preferredPosition","preferredAlignment","preferInputActivator","fixed","zIndexOverride","render","bind","onScrollOut","clearTimeout","requestAnimationFrame","focusableChild","focus","preventScroll","process","env","NODE_ENV","childrenArray","toArray","rootNode","descendant","parent","parentNode"],"mappings":"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","sourcesContent":["import React, { PureComponent, createRef, Children } from 'react';\nimport { findFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { isElementOfType, wrapWithComponent } from '../../../../utilities/components.js';\nimport { Key } from '../../../../types.js';\nimport { overlay } from '../../../shared.js';\nimport styles from '../../Popover.scss.js';\nimport { KeypressListener } from '../../../KeypressListener/KeypressListener.js';\nimport { PositionedOverlay } from '../../../PositionedOverlay/PositionedOverlay.js';\nimport { Pane } from '../Pane/Pane.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nimport { CustomProperties } from '../../../CustomProperties/CustomProperties.js';\nimport { tokens } from '../../../../tokens/tokens.js';\n\nlet PopoverCloseSource;\n\n(function (PopoverCloseSource) {\n  PopoverCloseSource[PopoverCloseSource[\"Click\"] = 0] = \"Click\";\n  PopoverCloseSource[PopoverCloseSource[\"EscapeKeypress\"] = 1] = \"EscapeKeypress\";\n  PopoverCloseSource[PopoverCloseSource[\"FocusOut\"] = 2] = \"FocusOut\";\n  PopoverCloseSource[PopoverCloseSource[\"ScrollOut\"] = 3] = \"ScrollOut\";\n})(PopoverCloseSource || (PopoverCloseSource = {}));\n\nvar TransitionStatus;\n\n(function (TransitionStatus) {\n  TransitionStatus[\"Entering\"] = \"entering\";\n  TransitionStatus[\"Entered\"] = \"entered\";\n  TransitionStatus[\"Exiting\"] = \"exiting\";\n  TransitionStatus[\"Exited\"] = \"exited\";\n})(TransitionStatus || (TransitionStatus = {}));\n\nclass PopoverOverlay extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transitionStatus: this.props.active ? TransitionStatus.Entering : TransitionStatus.Exited\n    };\n    this.contentNode = /*#__PURE__*/createRef();\n    this.enteringTimer = void 0;\n    this.exitingTimer = void 0;\n    this.overlayRef = void 0;\n\n    this.renderPopover = overlayDetails => {\n      const {\n        measuring,\n        desiredHeight,\n        positioning\n      } = overlayDetails;\n      const {\n        id,\n        children,\n        sectioned,\n        fullWidth,\n        fullHeight,\n        fluidContent,\n        hideOnPrint,\n        colorScheme,\n        autofocusTarget\n      } = this.props;\n      const className = classNames(styles.Popover, positioning === 'above' && styles.positionedAbove, fullWidth && styles.fullWidth, measuring && styles.measuring, hideOnPrint && styles['PopoverOverlay-hideOnPrint']);\n      const contentStyles = measuring ? undefined : {\n        height: desiredHeight\n      };\n      const contentClassNames = classNames(styles.Content, fullHeight && styles['Content-fullHeight'], fluidContent && styles['Content-fluidContent']);\n      const content = /*#__PURE__*/React.createElement(\"div\", {\n        id: id,\n        tabIndex: autofocusTarget === 'none' ? undefined : -1,\n        className: contentClassNames,\n        style: contentStyles,\n        ref: this.contentNode\n      }, renderPopoverContent(children, {\n        sectioned\n      }));\n      return /*#__PURE__*/React.createElement(\"div\", Object.assign({\n        className: className\n      }, overlay.props), /*#__PURE__*/React.createElement(EventListener, {\n        event: \"click\",\n        handler: this.handleClick\n      }), /*#__PURE__*/React.createElement(EventListener, {\n        event: \"touchstart\",\n        handler: this.handleClick\n      }), /*#__PURE__*/React.createElement(KeypressListener, {\n        keyCode: Key.Escape,\n        handler: this.handleEscape\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.FocusTracker // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        ,\n        tabIndex: 0,\n        onFocus: this.handleFocusFirstItem\n      }), /*#__PURE__*/React.createElement(CustomProperties, {\n        colorScheme: colorScheme\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.Wrapper\n      }, content)), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.FocusTracker // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n        ,\n        tabIndex: 0,\n        onFocus: this.handleFocusLastItem\n      }));\n    };\n\n    this.handleClick = event => {\n      const target = event.target;\n      const {\n        contentNode,\n        props: {\n          activator,\n          onClose\n        }\n      } = this;\n      const isDescendant = contentNode.current != null && nodeContainsDescendant(contentNode.current, target);\n      const isActivatorDescendant = nodeContainsDescendant(activator, target);\n\n      if (isDescendant || isActivatorDescendant || this.state.transitionStatus !== TransitionStatus.Entered) {\n        return;\n      }\n\n      onClose(PopoverCloseSource.Click);\n    };\n\n    this.handleScrollOut = () => {\n      this.props.onClose(PopoverCloseSource.ScrollOut);\n    };\n\n    this.handleEscape = () => {\n      this.props.onClose(PopoverCloseSource.EscapeKeypress);\n    };\n\n    this.handleFocusFirstItem = () => {\n      this.props.onClose(PopoverCloseSource.FocusOut);\n    };\n\n    this.handleFocusLastItem = () => {\n      this.props.onClose(PopoverCloseSource.FocusOut);\n    };\n\n    this.overlayRef = /*#__PURE__*/createRef();\n  }\n\n  forceUpdatePosition() {\n    var _this$overlayRef$curr;\n\n    (_this$overlayRef$curr = this.overlayRef.current) === null || _this$overlayRef$curr === void 0 ? void 0 : _this$overlayRef$curr.forceUpdatePosition();\n  }\n\n  changeTransitionStatus(transitionStatus, cb) {\n    this.setState({\n      transitionStatus\n    }, cb); // Forcing a reflow to enable the animation\n\n    this.contentNode.current && this.contentNode.current.getBoundingClientRect();\n  }\n\n  componentDidMount() {\n    if (this.props.active) {\n      this.focusContent();\n      this.changeTransitionStatus(TransitionStatus.Entered);\n    }\n  }\n\n  componentDidUpdate(oldProps) {\n    if (this.props.active && !oldProps.active) {\n      this.focusContent();\n      this.changeTransitionStatus(TransitionStatus.Entering, () => {\n        this.clearTransitionTimeout();\n        this.enteringTimer = window.setTimeout(() => {\n          this.setState({\n            transitionStatus: TransitionStatus.Entered\n          });\n        }, parseInt(tokens.motion['duration-100'], 10));\n      });\n    }\n\n    if (!this.props.active && oldProps.active) {\n      this.changeTransitionStatus(TransitionStatus.Exiting, () => {\n        this.clearTransitionTimeout();\n        this.exitingTimer = window.setTimeout(() => {\n          this.setState({\n            transitionStatus: TransitionStatus.Exited\n          });\n        }, parseInt(tokens.motion['duration-100'], 10));\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearTransitionTimeout();\n  }\n\n  render() {\n    const {\n      active,\n      activator,\n      fullWidth,\n      preferredPosition = 'below',\n      preferredAlignment = 'center',\n      preferInputActivator = true,\n      fixed,\n      zIndexOverride\n    } = this.props;\n    const {\n      transitionStatus\n    } = this.state;\n    if (transitionStatus === TransitionStatus.Exited && !active) return null;\n    const className = classNames(styles.PopoverOverlay, transitionStatus === TransitionStatus.Entering && styles['PopoverOverlay-entering'], transitionStatus === TransitionStatus.Entered && styles['PopoverOverlay-open'], transitionStatus === TransitionStatus.Exiting && styles['PopoverOverlay-exiting']);\n    return /*#__PURE__*/React.createElement(PositionedOverlay, {\n      ref: this.overlayRef,\n      fullWidth: fullWidth,\n      active: active,\n      activator: activator,\n      preferInputActivator: preferInputActivator,\n      preferredPosition: preferredPosition,\n      preferredAlignment: preferredAlignment,\n      render: this.renderPopover.bind(this),\n      fixed: fixed,\n      onScrollOut: this.handleScrollOut,\n      classNames: className,\n      zIndexOverride: zIndexOverride\n    });\n  }\n\n  clearTransitionTimeout() {\n    if (this.enteringTimer) {\n      window.clearTimeout(this.enteringTimer);\n    }\n\n    if (this.exitingTimer) {\n      window.clearTimeout(this.exitingTimer);\n    }\n  }\n\n  focusContent() {\n    const {\n      autofocusTarget = 'container'\n    } = this.props;\n\n    if (autofocusTarget === 'none' || this.contentNode == null) {\n      return;\n    }\n\n    requestAnimationFrame(() => {\n      if (this.contentNode.current == null) {\n        return;\n      }\n\n      const focusableChild = findFirstFocusableNode(this.contentNode.current);\n\n      if (focusableChild && autofocusTarget === 'first-node') {\n        focusableChild.focus({\n          preventScroll: process.env.NODE_ENV === 'development'\n        });\n      } else {\n        this.contentNode.current.focus({\n          preventScroll: process.env.NODE_ENV === 'development'\n        });\n      }\n    });\n  } // eslint-disable-next-line @shopify/react-no-multiple-render-methods\n\n\n}\n\nfunction renderPopoverContent(children, props) {\n  const childrenArray = Children.toArray(children);\n\n  if (isElementOfType(childrenArray[0], Pane)) {\n    return childrenArray;\n  }\n\n  return wrapWithComponent(childrenArray, Pane, props);\n}\n\nfunction nodeContainsDescendant(rootNode, descendant) {\n  if (rootNode === descendant) {\n    return true;\n  }\n\n  let parent = descendant.parentNode;\n\n  while (parent != null) {\n    if (parent === rootNode) {\n      return true;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return false;\n}\n\nexport { PopoverCloseSource, PopoverOverlay, nodeContainsDescendant };\n"]},"metadata":{},"sourceType":"module"}