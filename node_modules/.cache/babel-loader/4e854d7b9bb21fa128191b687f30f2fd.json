{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isAppMessage = exports.isPermitted = exports.getPermissionKey = exports.isFromApp = exports.isAppBridgeAction = void 0;\n\nvar types_1 = require(\"../client/types\");\n\nvar constants_1 = require(\"./constants\");\n\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\n\n\nfunction isAppBridgeAction(action) {\n  return action instanceof Object && Object.prototype.hasOwnProperty.call(action, 'type') && action.type.toString().startsWith(constants_1.PREFIX);\n}\n\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\n\nfunction isFromApp(action) {\n  if (typeof action !== 'object' || typeof action.source !== 'object') {\n    return false;\n  }\n\n  return typeof action.source.apiKey === 'string';\n}\n\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\n\nfunction getPermissionKey(type) {\n  return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\n\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\n\nfunction isPermitted(features, _a, permissionType) {\n  var group = _a.group,\n      type = _a.type;\n\n  if (!group || !Object.prototype.hasOwnProperty.call(features, group)) {\n    return false;\n  }\n\n  var feature = features[group];\n\n  if (!feature) {\n    return false;\n  }\n\n  var actionType = getPermissionKey(type);\n  return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\n\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\n\nfunction isAppMessage(event) {\n  if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n    return false;\n  }\n\n  var data = event.data;\n  return Object.prototype.hasOwnProperty.call(data, 'type') && helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined;\n}\n\nexports.isAppMessage = isAppMessage;","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/app-bridge/actions/validator.js"],"names":["Object","defineProperty","exports","value","isAppMessage","isPermitted","getPermissionKey","isFromApp","isAppBridgeAction","types_1","require","constants_1","helper_1","action","prototype","hasOwnProperty","call","type","toString","startsWith","PREFIX","source","apiKey","replace","RegExp","SEPARATOR","features","_a","permissionType","group","feature","actionType","event","data","findMatchInEnum","MessageType","undefined"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,YAAR,GAAuBF,OAAO,CAACG,WAAR,GAAsBH,OAAO,CAACI,gBAAR,GAA2BJ,OAAO,CAACK,SAAR,GAAoBL,OAAO,CAACM,iBAAR,GAA4B,KAAK,CAA7H;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,iBAAD,CAArB;;AACA,IAAIC,WAAW,GAAGD,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAD,CAAtB;AACA;AACA;AACA;AACA;;;AACA,SAASF,iBAAT,CAA2BK,MAA3B,EAAmC;AAC/B,SAAQA,MAAM,YAAYb,MAAlB,IACJA,MAAM,CAACc,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCH,MAArC,EAA6C,MAA7C,CADI,IAEJA,MAAM,CAACI,IAAP,CAAYC,QAAZ,GAAuBC,UAAvB,CAAkCR,WAAW,CAACS,MAA9C,CAFJ;AAGH;;AACDlB,OAAO,CAACM,iBAAR,GAA4BA,iBAA5B;AACA;AACA;AACA;AACA;;AACA,SAASD,SAAT,CAAmBM,MAAnB,EAA2B;AACvB,MAAI,OAAOA,MAAP,KAAkB,QAAlB,IAA8B,OAAOA,MAAM,CAACQ,MAAd,KAAyB,QAA3D,EAAqE;AACjE,WAAO,KAAP;AACH;;AACD,SAAO,OAAOR,MAAM,CAACQ,MAAP,CAAcC,MAArB,KAAgC,QAAvC;AACH;;AACDpB,OAAO,CAACK,SAAR,GAAoBA,SAApB;AACA;AACA;AACA;AACA;;AACA,SAASD,gBAAT,CAA0BW,IAA1B,EAAgC;AAC5B,SAAOA,IAAI,CAACM,OAAL,CAAa,IAAIC,MAAJ,CAAW,MAAMb,WAAW,CAACS,MAAlB,GAA2BT,WAAW,CAACc,SAAvC,GAAmD,MAAnD,GAA4Dd,WAAW,CAACc,SAAnF,CAAb,EAA4G,EAA5G,CAAP;AACH;;AACDvB,OAAO,CAACI,gBAAR,GAA2BA,gBAA3B;AACA;AACA;AACA;AACA;;AACA,SAASD,WAAT,CAAqBqB,QAArB,EAA+BC,EAA/B,EAAmCC,cAAnC,EAAmD;AAC/C,MAAIC,KAAK,GAAGF,EAAE,CAACE,KAAf;AAAA,MAAsBZ,IAAI,GAAGU,EAAE,CAACV,IAAhC;;AACA,MAAI,CAACY,KAAD,IAAU,CAAC7B,MAAM,CAACc,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCU,QAArC,EAA+CG,KAA/C,CAAf,EAAsE;AAClE,WAAO,KAAP;AACH;;AACD,MAAIC,OAAO,GAAGJ,QAAQ,CAACG,KAAD,CAAtB;;AACA,MAAI,CAACC,OAAL,EAAc;AACV,WAAO,KAAP;AACH;;AACD,MAAIC,UAAU,GAAGzB,gBAAgB,CAACW,IAAD,CAAjC;AACA,SAAOa,OAAO,CAACC,UAAD,CAAP,GAAsBD,OAAO,CAACC,UAAD,CAAP,CAAoBH,cAApB,MAAwC,IAA9D,GAAqE,KAA5E;AACH;;AACD1B,OAAO,CAACG,WAAR,GAAsBA,WAAtB;AACA;AACA;AACA;AACA;;AACA,SAASD,YAAT,CAAsB4B,KAAtB,EAA6B;AACzB,MAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6B,CAACA,KAAK,CAACC,IAApC,IAA4C,OAAOD,KAAK,CAACC,IAAb,KAAsB,QAAtE,EAAgF;AAC5E,WAAO,KAAP;AACH;;AACD,MAAIA,IAAI,GAAGD,KAAK,CAACC,IAAjB;AACA,SAAQjC,MAAM,CAACc,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCiB,IAArC,EAA2C,MAA3C,KACJrB,QAAQ,CAACsB,eAAT,CAAyBzB,OAAO,CAAC0B,WAAjC,EAA8CF,IAAI,CAAChB,IAAnD,MAA6DmB,SADjE;AAEH;;AACDlC,OAAO,CAACE,YAAR,GAAuBA,YAAvB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAppMessage = exports.isPermitted = exports.getPermissionKey = exports.isFromApp = exports.isAppBridgeAction = void 0;\nvar types_1 = require(\"../client/types\");\nvar constants_1 = require(\"./constants\");\nvar helper_1 = require(\"./helper\");\n/**\n * Predicate to determine if an action is an App Bridge action.\n * @public\n */\nfunction isAppBridgeAction(action) {\n    return (action instanceof Object &&\n        Object.prototype.hasOwnProperty.call(action, 'type') &&\n        action.type.toString().startsWith(constants_1.PREFIX));\n}\nexports.isAppBridgeAction = isAppBridgeAction;\n/**\n * Predicate to determine if an action originated from an application.\n * @internal\n */\nfunction isFromApp(action) {\n    if (typeof action !== 'object' || typeof action.source !== 'object') {\n        return false;\n    }\n    return typeof action.source.apiKey === 'string';\n}\nexports.isFromApp = isFromApp;\n/**\n * Returns the action type without the prefix and group\n * @internal\n */\nfunction getPermissionKey(type) {\n    return type.replace(new RegExp(\"^\" + constants_1.PREFIX + constants_1.SEPARATOR + \"\\\\w+\" + constants_1.SEPARATOR), '');\n}\nexports.getPermissionKey = getPermissionKey;\n/**\n * Predicate to determine if an action is permitted\n * @internal\n */\nfunction isPermitted(features, _a, permissionType) {\n    var group = _a.group, type = _a.type;\n    if (!group || !Object.prototype.hasOwnProperty.call(features, group)) {\n        return false;\n    }\n    var feature = features[group];\n    if (!feature) {\n        return false;\n    }\n    var actionType = getPermissionKey(type);\n    return feature[actionType] ? feature[actionType][permissionType] === true : false;\n}\nexports.isPermitted = isPermitted;\n/**\n * Predicate to determine if an event originated from an application.\n * @internal\n */\nfunction isAppMessage(event) {\n    if (typeof event !== 'object' || !event.data || typeof event.data !== 'object') {\n        return false;\n    }\n    var data = event.data;\n    return (Object.prototype.hasOwnProperty.call(data, 'type') &&\n        helper_1.findMatchInEnum(types_1.MessageType, data.type) !== undefined);\n}\nexports.isAppMessage = isAppMessage;\n"]},"metadata":{},"sourceType":"script"}