{"ast":null,"code":"import _toConsumableArray from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useCallback } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport { arraysAreEqual } from '../../utilities/arrays.js';\nimport { useDeepEffect } from '../../utilities/use-deep-effect.js';\nimport styles from './OptionList.scss.js';\nimport { Option } from './components/Option/Option.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\n\nfunction OptionList(_ref) {\n  var options = _ref.options,\n      sections = _ref.sections,\n      title = _ref.title,\n      selected = _ref.selected,\n      allowMultiple = _ref.allowMultiple,\n      role = _ref.role,\n      optionRole = _ref.optionRole,\n      verticalAlign = _ref.verticalAlign,\n      onChange = _ref.onChange,\n      idProp = _ref.id;\n\n  var _useState = useState(createNormalizedOptions(options, sections, title)),\n      _useState2 = _slicedToArray(_useState, 2),\n      normalizedOptions = _useState2[0],\n      setNormalizedOptions = _useState2[1];\n\n  var id = useUniqueId('OptionList', idProp);\n  useDeepEffect(function () {\n    setNormalizedOptions(createNormalizedOptions(options || [], sections || [], title));\n  }, [options, sections, title], optionArraysAreEqual);\n  var handleClick = useCallback(function (sectionIndex, optionIndex) {\n    var selectedValue = normalizedOptions[sectionIndex].options[optionIndex].value;\n    var foundIndex = selected.indexOf(selectedValue);\n\n    if (allowMultiple) {\n      var newSelection = foundIndex === -1 ? [selectedValue].concat(_toConsumableArray(selected)) : [].concat(_toConsumableArray(selected.slice(0, foundIndex)), _toConsumableArray(selected.slice(foundIndex + 1, selected.length)));\n      onChange(newSelection);\n      return;\n    }\n\n    onChange([selectedValue]);\n  }, [normalizedOptions, selected, allowMultiple, onChange]);\n  var optionsExist = normalizedOptions.length > 0;\n  var optionsMarkup = optionsExist ? normalizedOptions.map(function (_ref2, sectionIndex) {\n    var title = _ref2.title,\n        options = _ref2.options;\n    var titleMarkup = title ? /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.Title\n    }, title) : null;\n    var optionsMarkup = options && options.map(function (option, optionIndex) {\n      var isSelected = selected.includes(option.value);\n      var optionId = option.id || \"\".concat(id, \"-\").concat(sectionIndex, \"-\").concat(optionIndex);\n      return /*#__PURE__*/React.createElement(Option, Object.assign({\n        key: optionId\n      }, option, {\n        id: optionId,\n        section: sectionIndex,\n        index: optionIndex,\n        onClick: handleClick,\n        select: isSelected,\n        allowMultiple: allowMultiple,\n        verticalAlign: verticalAlign,\n        role: optionRole\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: title || \"noTitle-\".concat(sectionIndex)\n    }, titleMarkup, /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.Options,\n      id: \"\".concat(id, \"-\").concat(sectionIndex),\n      role: role\n    }, optionsMarkup));\n  }) : null;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.OptionList,\n    role: role\n  }, optionsMarkup);\n}\n\nfunction createNormalizedOptions(options, sections, title) {\n  if (options == null) {\n    var section = {\n      options: [],\n      title: title\n    };\n    return sections == null ? [] : [section].concat(_toConsumableArray(sections));\n  }\n\n  if (sections == null) {\n    return [{\n      title: title,\n      options: options\n    }];\n  }\n\n  return [{\n    title: title,\n    options: options\n  }].concat(_toConsumableArray(sections));\n}\n\nfunction optionArraysAreEqual(firstArray, secondArray) {\n  if (isSection(firstArray) && isSection(secondArray)) {\n    return arraysAreEqual(firstArray, secondArray, testSectionsPropEquality);\n  }\n\n  return arraysAreEqual(firstArray, secondArray);\n}\n\nfunction testSectionsPropEquality(previousSection, currentSection) {\n  var previousOptions = previousSection.options;\n  var currentOptions = currentSection.options;\n  var optionsAreEqual = arraysAreEqual(previousOptions, currentOptions);\n  var titlesAreEqual = previousSection.title === currentSection.title;\n  return optionsAreEqual && titlesAreEqual;\n}\n\nexport { OptionList };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/OptionList/OptionList.js"],"names":["React","useState","useCallback","isSection","arraysAreEqual","useDeepEffect","styles","Option","useUniqueId","OptionList","options","sections","title","selected","allowMultiple","role","optionRole","verticalAlign","onChange","idProp","id","createNormalizedOptions","normalizedOptions","setNormalizedOptions","optionArraysAreEqual","handleClick","sectionIndex","optionIndex","selectedValue","value","foundIndex","indexOf","newSelection","slice","length","optionsExist","optionsMarkup","map","titleMarkup","createElement","className","Title","option","isSelected","includes","optionId","Object","assign","key","section","index","onClick","select","Options","firstArray","secondArray","testSectionsPropEquality","previousSection","currentSection","previousOptions","currentOptions","optionsAreEqual","titlesAreEqual"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport { arraysAreEqual } from '../../utilities/arrays.js';\nimport { useDeepEffect } from '../../utilities/use-deep-effect.js';\nimport styles from './OptionList.scss.js';\nimport { Option } from './components/Option/Option.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\n\nfunction OptionList({\n  options,\n  sections,\n  title,\n  selected,\n  allowMultiple,\n  role,\n  optionRole,\n  verticalAlign,\n  onChange,\n  id: idProp\n}) {\n  const [normalizedOptions, setNormalizedOptions] = useState(createNormalizedOptions(options, sections, title));\n  const id = useUniqueId('OptionList', idProp);\n  useDeepEffect(() => {\n    setNormalizedOptions(createNormalizedOptions(options || [], sections || [], title));\n  }, [options, sections, title], optionArraysAreEqual);\n  const handleClick = useCallback((sectionIndex, optionIndex) => {\n    const selectedValue = normalizedOptions[sectionIndex].options[optionIndex].value;\n    const foundIndex = selected.indexOf(selectedValue);\n\n    if (allowMultiple) {\n      const newSelection = foundIndex === -1 ? [selectedValue, ...selected] : [...selected.slice(0, foundIndex), ...selected.slice(foundIndex + 1, selected.length)];\n      onChange(newSelection);\n      return;\n    }\n\n    onChange([selectedValue]);\n  }, [normalizedOptions, selected, allowMultiple, onChange]);\n  const optionsExist = normalizedOptions.length > 0;\n  const optionsMarkup = optionsExist ? normalizedOptions.map(({\n    title,\n    options\n  }, sectionIndex) => {\n    const titleMarkup = title ? /*#__PURE__*/React.createElement(\"p\", {\n      className: styles.Title\n    }, title) : null;\n    const optionsMarkup = options && options.map((option, optionIndex) => {\n      const isSelected = selected.includes(option.value);\n      const optionId = option.id || `${id}-${sectionIndex}-${optionIndex}`;\n      return /*#__PURE__*/React.createElement(Option, Object.assign({\n        key: optionId\n      }, option, {\n        id: optionId,\n        section: sectionIndex,\n        index: optionIndex,\n        onClick: handleClick,\n        select: isSelected,\n        allowMultiple: allowMultiple,\n        verticalAlign: verticalAlign,\n        role: optionRole\n      }));\n    });\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: title || `noTitle-${sectionIndex}`\n    }, titleMarkup, /*#__PURE__*/React.createElement(\"ul\", {\n      className: styles.Options,\n      id: `${id}-${sectionIndex}`,\n      role: role\n    }, optionsMarkup));\n  }) : null;\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.OptionList,\n    role: role\n  }, optionsMarkup);\n}\n\nfunction createNormalizedOptions(options, sections, title) {\n  if (options == null) {\n    const section = {\n      options: [],\n      title\n    };\n    return sections == null ? [] : [section, ...sections];\n  }\n\n  if (sections == null) {\n    return [{\n      title,\n      options\n    }];\n  }\n\n  return [{\n    title,\n    options\n  }, ...sections];\n}\n\nfunction optionArraysAreEqual(firstArray, secondArray) {\n  if (isSection(firstArray) && isSection(secondArray)) {\n    return arraysAreEqual(firstArray, secondArray, testSectionsPropEquality);\n  }\n\n  return arraysAreEqual(firstArray, secondArray);\n}\n\nfunction testSectionsPropEquality(previousSection, currentSection) {\n  const {\n    options: previousOptions\n  } = previousSection;\n  const {\n    options: currentOptions\n  } = currentSection;\n  const optionsAreEqual = arraysAreEqual(previousOptions, currentOptions);\n  const titlesAreEqual = previousSection.title === currentSection.title;\n  return optionsAreEqual && titlesAreEqual;\n}\n\nexport { OptionList };\n"]},"metadata":{},"sourceType":"module"}