{"ast":null,"code":"import React, { PureComponent } from 'react';\nimport { isServer } from '../../../../utilities/target.js';\nimport styles from '../../ColorPicker.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nlet isDragging = false; // Required to solve a bug causing the underlying page/container to scroll\n// while trying to drag the ColorPicker controls.\n// This must be called as soon as possible to properly prevent the event.\n// `passive: false` must also be set, as it seems webkit has changed the \"default\" behaviour\n// https://bugs.webkit.org/show_bug.cgi?id=182521\n\nif (!isServer) {\n  window.addEventListener('touchmove', event => {\n    if (!isDragging) {\n      return;\n    }\n\n    event.preventDefault();\n  }, {\n    passive: false\n  });\n}\n\nclass Slidable extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      dragging: false\n    };\n    this.node = null;\n    this.draggerNode = null;\n\n    this.setDraggerNode = node => {\n      this.draggerNode = node;\n    };\n\n    this.setNode = node => {\n      this.node = node;\n    };\n\n    this.startDrag = event => {\n      if (isMouseDownEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n      }\n\n      isDragging = true;\n      this.setState({\n        dragging: true\n      });\n    };\n\n    this.handleDragEnd = () => {\n      isDragging = false;\n      this.setState({\n        dragging: false\n      });\n    };\n\n    this.handleMove = event => {\n      event.stopImmediatePropagation();\n      event.stopPropagation();\n\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (isMouseMoveEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n        return;\n      }\n\n      this.handleDraggerMove(event.touches[0].clientX, event.touches[0].clientY);\n    };\n\n    this.handleDraggerMove = (x, y) => {\n      if (this.node == null) {\n        return;\n      }\n\n      const {\n        onChange\n      } = this.props;\n      const rect = this.node.getBoundingClientRect();\n      const offsetX = x - rect.left;\n      const offsetY = y - rect.top;\n      onChange({\n        x: offsetX,\n        y: offsetY\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      onDraggerHeight\n    } = this.props;\n\n    if (onDraggerHeight == null) {\n      return;\n    }\n\n    const {\n      draggerNode\n    } = this;\n\n    if (draggerNode == null) {\n      return;\n    }\n\n    onDraggerHeight(draggerNode.clientWidth);\n\n    if (process.env.NODE_ENV === 'development') {\n      setTimeout(() => {\n        onDraggerHeight(draggerNode.clientWidth);\n      }, 0);\n    }\n  }\n\n  render() {\n    const {\n      dragging\n    } = this.state;\n    const {\n      draggerX = 0,\n      draggerY = 0\n    } = this.props;\n    const draggerPositioning = {\n      transform: `translate3d(${draggerX}px, ${draggerY}px, 0)`\n    };\n    const moveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mousemove\",\n      handler: this.handleMove,\n      passive: false\n    }) : null;\n    const touchMoveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchmove\",\n      handler: this.handleMove,\n      passive: false\n    }) : null;\n    const endDragListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mouseup\",\n      handler: this.handleDragEnd\n    }) : null;\n    const touchEndListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchend\",\n      handler: this.handleDragEnd\n    }) : null;\n    const touchCancelListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchcancel\",\n      handler: this.handleDragEnd\n    }) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.setNode,\n      className: styles.Slidable,\n      onMouseDown: this.startDrag,\n      onTouchStart: this.startDrag\n    }, endDragListener, moveListener, touchMoveListener, touchEndListener, touchCancelListener, /*#__PURE__*/React.createElement(\"div\", {\n      style: draggerPositioning,\n      className: styles.Dragger,\n      ref: this.setDraggerNode\n    }));\n  }\n\n}\n\nfunction isMouseMoveEvent(event) {\n  return event.type === 'mousemove';\n}\n\nfunction isMouseDownEvent(event) {\n  return event.type === 'mousedown';\n}\n\nexport { Slidable };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/ColorPicker/components/Slidable/Slidable.js"],"names":["React","PureComponent","isServer","styles","EventListener","isDragging","window","addEventListener","event","preventDefault","passive","Slidable","constructor","state","dragging","node","draggerNode","setDraggerNode","setNode","startDrag","isMouseDownEvent","handleDraggerMove","clientX","clientY","setState","handleDragEnd","handleMove","stopImmediatePropagation","stopPropagation","cancelable","isMouseMoveEvent","touches","x","y","onChange","props","rect","getBoundingClientRect","offsetX","left","offsetY","top","componentDidMount","onDraggerHeight","clientWidth","process","env","NODE_ENV","setTimeout","render","draggerX","draggerY","draggerPositioning","transform","moveListener","createElement","handler","touchMoveListener","endDragListener","touchEndListener","touchCancelListener","ref","className","onMouseDown","onTouchStart","style","Dragger","type"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport { isServer } from '../../../../utilities/target.js';\nimport styles from '../../ColorPicker.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nlet isDragging = false; // Required to solve a bug causing the underlying page/container to scroll\n// while trying to drag the ColorPicker controls.\n// This must be called as soon as possible to properly prevent the event.\n// `passive: false` must also be set, as it seems webkit has changed the \"default\" behaviour\n// https://bugs.webkit.org/show_bug.cgi?id=182521\n\nif (!isServer) {\n  window.addEventListener('touchmove', event => {\n    if (!isDragging) {\n      return;\n    }\n\n    event.preventDefault();\n  }, {\n    passive: false\n  });\n}\n\nclass Slidable extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dragging: false\n    };\n    this.node = null;\n    this.draggerNode = null;\n\n    this.setDraggerNode = node => {\n      this.draggerNode = node;\n    };\n\n    this.setNode = node => {\n      this.node = node;\n    };\n\n    this.startDrag = event => {\n      if (isMouseDownEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n      }\n\n      isDragging = true;\n      this.setState({\n        dragging: true\n      });\n    };\n\n    this.handleDragEnd = () => {\n      isDragging = false;\n      this.setState({\n        dragging: false\n      });\n    };\n\n    this.handleMove = event => {\n      event.stopImmediatePropagation();\n      event.stopPropagation();\n\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (isMouseMoveEvent(event)) {\n        this.handleDraggerMove(event.clientX, event.clientY);\n        return;\n      }\n\n      this.handleDraggerMove(event.touches[0].clientX, event.touches[0].clientY);\n    };\n\n    this.handleDraggerMove = (x, y) => {\n      if (this.node == null) {\n        return;\n      }\n\n      const {\n        onChange\n      } = this.props;\n      const rect = this.node.getBoundingClientRect();\n      const offsetX = x - rect.left;\n      const offsetY = y - rect.top;\n      onChange({\n        x: offsetX,\n        y: offsetY\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      onDraggerHeight\n    } = this.props;\n\n    if (onDraggerHeight == null) {\n      return;\n    }\n\n    const {\n      draggerNode\n    } = this;\n\n    if (draggerNode == null) {\n      return;\n    }\n\n    onDraggerHeight(draggerNode.clientWidth);\n\n    if (process.env.NODE_ENV === 'development') {\n      setTimeout(() => {\n        onDraggerHeight(draggerNode.clientWidth);\n      }, 0);\n    }\n  }\n\n  render() {\n    const {\n      dragging\n    } = this.state;\n    const {\n      draggerX = 0,\n      draggerY = 0\n    } = this.props;\n    const draggerPositioning = {\n      transform: `translate3d(${draggerX}px, ${draggerY}px, 0)`\n    };\n    const moveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mousemove\",\n      handler: this.handleMove,\n      passive: false\n    }) : null;\n    const touchMoveListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchmove\",\n      handler: this.handleMove,\n      passive: false\n    }) : null;\n    const endDragListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"mouseup\",\n      handler: this.handleDragEnd\n    }) : null;\n    const touchEndListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchend\",\n      handler: this.handleDragEnd\n    }) : null;\n    const touchCancelListener = dragging ? /*#__PURE__*/React.createElement(EventListener, {\n      event: \"touchcancel\",\n      handler: this.handleDragEnd\n    }) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: this.setNode,\n      className: styles.Slidable,\n      onMouseDown: this.startDrag,\n      onTouchStart: this.startDrag\n    }, endDragListener, moveListener, touchMoveListener, touchEndListener, touchCancelListener, /*#__PURE__*/React.createElement(\"div\", {\n      style: draggerPositioning,\n      className: styles.Dragger,\n      ref: this.setDraggerNode\n    }));\n  }\n\n}\n\nfunction isMouseMoveEvent(event) {\n  return event.type === 'mousemove';\n}\n\nfunction isMouseDownEvent(event) {\n  return event.type === 'mousedown';\n}\n\nexport { Slidable };\n"]},"metadata":{},"sourceType":"module"}