{"ast":null,"code":"import _objectSpread from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, useRef, useEffect, useCallback, createElement } from 'react';\nimport { CircleCancelMinor } from '@shopify/polaris-icons';\nimport { classNames, variationName } from '../../utilities/css.js';\nimport { useIsAfterInitialMount } from '../../utilities/use-is-after-initial-mount.js';\nimport { Key } from '../../types.js';\nimport styles from './TextField.scss.js';\nimport { Labelled, helpTextID } from '../Labelled/Labelled.js';\nimport { Connected } from '../Connected/Connected.js';\nimport { Spinner } from './components/Spinner/Spinner.js';\nimport { Resizer } from './components/Resizer/Resizer.js';\nimport { labelID } from '../Label/Label.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden.js';\nimport { Icon } from '../Icon/Icon.js';\n\nfunction TextField(_ref) {\n  var prefix = _ref.prefix,\n      suffix = _ref.suffix,\n      verticalContent = _ref.verticalContent,\n      placeholder = _ref.placeholder,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      helpText = _ref.helpText,\n      label = _ref.label,\n      labelAction = _ref.labelAction,\n      labelHidden = _ref.labelHidden,\n      disabled = _ref.disabled,\n      clearButton = _ref.clearButton,\n      readOnly = _ref.readOnly,\n      autoFocus = _ref.autoFocus,\n      focused = _ref.focused,\n      multiline = _ref.multiline,\n      error = _ref.error,\n      connectedRight = _ref.connectedRight,\n      connectedLeft = _ref.connectedLeft,\n      _ref$type = _ref.type,\n      type = _ref$type === void 0 ? 'text' : _ref$type,\n      name = _ref.name,\n      idProp = _ref.id,\n      role = _ref.role,\n      step = _ref.step,\n      autoComplete = _ref.autoComplete,\n      max = _ref.max,\n      maxLength = _ref.maxLength,\n      maxHeight = _ref.maxHeight,\n      min = _ref.min,\n      minLength = _ref.minLength,\n      pattern = _ref.pattern,\n      inputMode = _ref.inputMode,\n      spellCheck = _ref.spellCheck,\n      ariaOwns = _ref.ariaOwns,\n      ariaControls = _ref.ariaControls,\n      ariaExpanded = _ref.ariaExpanded,\n      ariaActiveDescendant = _ref.ariaActiveDescendant,\n      ariaAutocomplete = _ref.ariaAutocomplete,\n      showCharacterCount = _ref.showCharacterCount,\n      align = _ref.align,\n      requiredIndicator = _ref.requiredIndicator,\n      monospaced = _ref.monospaced,\n      selectTextOnFocus = _ref.selectTextOnFocus,\n      suggestion = _ref.suggestion,\n      onClearButtonClick = _ref.onClearButtonClick,\n      onChange = _ref.onChange,\n      onFocus = _ref.onFocus,\n      onBlur = _ref.onBlur;\n  var i18n = useI18n();\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      height = _useState2[0],\n      setHeight = _useState2[1];\n\n  var _useState3 = useState(Boolean(focused)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      focus = _useState4[0],\n      setFocus = _useState4[1];\n\n  var isAfterInitial = useIsAfterInitialMount();\n  var id = useUniqueId('TextField', idProp);\n  var inputRef = useRef(null);\n  var textAreaRef = useRef(null);\n  var prefixRef = useRef(null);\n  var suffixRef = useRef(null);\n  var verticalContentRef = useRef(null);\n  var buttonPressTimer = useRef();\n  useEffect(function () {\n    var input = inputRef.current;\n    if (!input || focused === undefined) return;\n    focused ? input.focus() : input.blur();\n  }, [focused]);\n  useEffect(function () {\n    var input = inputRef.current;\n    var isSupportedInputType = type === 'text' || type === 'tel' || type === 'search' || type === 'url' || type === 'password';\n\n    if (!input || !isSupportedInputType || !suggestion) {\n      return;\n    }\n\n    input.setSelectionRange(value.length, suggestion.length);\n  }, [focus, value, type, suggestion]);\n  var normalizedValue = suggestion ? suggestion : value;\n  var normalizedStep = step != null ? step : 1;\n  var normalizedMax = max != null ? max : Infinity;\n  var normalizedMin = min != null ? min : -Infinity;\n  var className = classNames(styles.TextField, Boolean(normalizedValue) && styles.hasValue, disabled && styles.disabled, readOnly && styles.readOnly, error && styles.error, multiline && styles.multiline, focus && styles.focus);\n  var inputType = type === 'currency' ? 'text' : type;\n  var prefixMarkup = prefix ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Prefix,\n    id: \"\".concat(id, \"-Prefix\"),\n    ref: prefixRef\n  }, prefix) : null;\n  var suffixMarkup = suffix ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Suffix,\n    id: \"\".concat(id, \"-Suffix\"),\n    ref: suffixRef\n  }, suffix) : null;\n  var characterCountMarkup = null;\n\n  if (showCharacterCount) {\n    var characterCount = normalizedValue.length;\n    var characterCountLabel = maxLength ? i18n.translate('Polaris.TextField.characterCountWithMaxLength', {\n      count: characterCount,\n      limit: maxLength\n    }) : i18n.translate('Polaris.TextField.characterCount', {\n      count: characterCount\n    });\n    var characterCountClassName = classNames(styles.CharacterCount, multiline && styles.AlignFieldBottom);\n    var characterCountText = !maxLength ? characterCount : \"\".concat(characterCount, \"/\").concat(maxLength);\n    characterCountMarkup = /*#__PURE__*/React.createElement(\"div\", {\n      id: \"\".concat(id, \"-CharacterCounter\"),\n      className: characterCountClassName,\n      \"aria-label\": characterCountLabel,\n      \"aria-live\": focus ? 'polite' : 'off',\n      \"aria-atomic\": \"true\"\n    }, characterCountText);\n  }\n\n  var clearButtonVisible = normalizedValue !== '';\n  var clearButtonClassNames = classNames(styles.ClearButton, !clearButtonVisible && styles.Hidden);\n  var clearButtonMarkup = clearButton ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: clearButtonClassNames,\n    onClick: handleClearButtonPress,\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(VisuallyHidden, null, i18n.translate('Polaris.Common.clear')), /*#__PURE__*/React.createElement(Icon, {\n    source: CircleCancelMinor,\n    color: \"base\"\n  })) : null;\n  var handleNumberChange = useCallback(function (steps) {\n    if (onChange == null) {\n      return;\n    } // Returns the length of decimal places in a number\n\n\n    var dpl = function dpl(num) {\n      return (num.toString().split('.')[1] || []).length;\n    };\n\n    var numericValue = value ? parseFloat(value) : 0;\n\n    if (isNaN(numericValue)) {\n      return;\n    } // Making sure the new value has the same length of decimal places as the\n    // step / value has.\n\n\n    var decimalPlaces = Math.max(dpl(numericValue), dpl(normalizedStep));\n    var newValue = Math.min(Number(normalizedMax), Math.max(numericValue + steps * normalizedStep, Number(normalizedMin)));\n    onChange(String(newValue.toFixed(decimalPlaces)), id);\n  }, [id, normalizedMax, normalizedMin, onChange, normalizedStep, value]);\n  var handleButtonRelease = useCallback(function () {\n    clearTimeout(buttonPressTimer.current);\n  }, []);\n  var handleButtonPress = useCallback(function (onChange) {\n    var minInterval = 50;\n    var decrementBy = 10;\n    var interval = 200;\n\n    var onChangeInterval = function onChangeInterval() {\n      if (interval > minInterval) interval -= decrementBy;\n      onChange(0);\n      buttonPressTimer.current = window.setTimeout(onChangeInterval, interval);\n    };\n\n    buttonPressTimer.current = window.setTimeout(onChangeInterval, interval);\n    document.addEventListener('mouseup', handleButtonRelease, {\n      once: true\n    });\n  }, [handleButtonRelease]);\n  var spinnerMarkup = type === 'number' && step !== 0 && !disabled && !readOnly ? /*#__PURE__*/React.createElement(Spinner, {\n    onChange: handleNumberChange,\n    onMouseDown: handleButtonPress,\n    onMouseUp: handleButtonRelease\n  }) : null;\n  var style = multiline && height ? {\n    height: height,\n    maxHeight: maxHeight\n  } : null;\n  var handleExpandingResize = useCallback(function (height) {\n    setHeight(height);\n  }, []);\n  var resizer = multiline && isAfterInitial ? /*#__PURE__*/React.createElement(Resizer, {\n    contents: normalizedValue || placeholder,\n    currentHeight: height,\n    minimumLines: typeof multiline === 'number' ? multiline : 1,\n    onHeightChange: handleExpandingResize\n  }) : null;\n  var describedBy = [];\n\n  if (error) {\n    describedBy.push(\"\".concat(id, \"Error\"));\n  }\n\n  if (helpText) {\n    describedBy.push(helpTextID(id));\n  }\n\n  if (showCharacterCount) {\n    describedBy.push(\"\".concat(id, \"-CharacterCounter\"));\n  }\n\n  var labelledBy = [];\n\n  if (prefix) {\n    labelledBy.push(\"\".concat(id, \"-Prefix\"));\n  }\n\n  if (suffix) {\n    labelledBy.push(\"\".concat(id, \"-Suffix\"));\n  }\n\n  if (verticalContent) {\n    labelledBy.push(\"\".concat(id, \"-VerticalContent\"));\n  }\n\n  labelledBy.unshift(labelID(id));\n  var inputClassName = classNames(styles.Input, align && styles[variationName('Input-align', align)], suffix && styles['Input-suffixed'], clearButton && styles['Input-hasClearButton'], monospaced && styles.monospaced, suggestion && styles.suggestion);\n\n  var handleOnFocus = function handleOnFocus(event) {\n    if (selectTextOnFocus && !suggestion) {\n      var _input = multiline ? textAreaRef.current : inputRef.current;\n\n      _input === null || _input === void 0 ? void 0 : _input.select();\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  var input = /*#__PURE__*/createElement(multiline ? 'textarea' : 'input', _objectSpread(_objectSpread({\n    name: name,\n    id: id,\n    disabled: disabled,\n    readOnly: readOnly,\n    role: role,\n    autoFocus: autoFocus,\n    value: normalizedValue,\n    placeholder: placeholder,\n    style: style,\n    autoComplete: autoComplete,\n    className: inputClassName,\n    ref: multiline ? textAreaRef : inputRef,\n    min: min,\n    max: max,\n    step: step,\n    minLength: minLength,\n    maxLength: maxLength,\n    spellCheck: spellCheck,\n    pattern: pattern,\n    inputMode: inputMode,\n    type: inputType,\n    rows: getRows(multiline),\n    'aria-describedby': describedBy.length ? describedBy.join(' ') : undefined,\n    'aria-labelledby': labelledBy.join(' '),\n    'aria-invalid': Boolean(error),\n    'aria-owns': ariaOwns,\n    'aria-activedescendant': ariaActiveDescendant,\n    'aria-autocomplete': ariaAutocomplete,\n    'aria-controls': ariaControls,\n    'aria-expanded': ariaExpanded,\n    'aria-required': requiredIndicator\n  }, normalizeAriaMultiline(multiline)), {}, {\n    onFocus: handleOnFocus,\n    onBlur: onBlur,\n    onKeyPress: handleKeyPress,\n    onChange: !suggestion ? handleChange : undefined,\n    onInput: suggestion ? handleChange : undefined\n  }));\n  var inputWithVerticalContentMarkup = verticalContent ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.VerticalContent,\n    id: \"\".concat(id, \"-VerticalContent\"),\n    ref: verticalContentRef\n  }, verticalContent, input) : null;\n  var inputMarkup = verticalContent ? inputWithVerticalContentMarkup : input;\n  var backdropClassName = classNames(styles.Backdrop, connectedLeft && styles['Backdrop-connectedLeft'], connectedRight && styles['Backdrop-connectedRight']);\n  return /*#__PURE__*/React.createElement(Labelled, {\n    label: label,\n    id: id,\n    error: error,\n    action: labelAction,\n    labelHidden: labelHidden,\n    helpText: helpText,\n    requiredIndicator: requiredIndicator\n  }, /*#__PURE__*/React.createElement(Connected, {\n    left: connectedLeft,\n    right: connectedRight\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onClick: handleClick\n  }, prefixMarkup, inputMarkup, suffixMarkup, characterCountMarkup, clearButtonMarkup, spinnerMarkup, /*#__PURE__*/React.createElement(\"div\", {\n    className: backdropClassName\n  }), resizer)));\n\n  function handleClearButtonPress() {\n    onClearButtonClick && onClearButtonClick(id);\n  }\n\n  function handleKeyPress(event) {\n    var key = event.key,\n        which = event.which;\n    var numbersSpec = /[\\d.eE+-]$/;\n\n    if (type !== 'number' || which === Key.Enter || numbersSpec.test(key)) {\n      return;\n    }\n\n    event.preventDefault();\n  }\n\n  function containsAffix(target) {\n    return target instanceof HTMLElement && (prefixRef.current && prefixRef.current.contains(target) || suffixRef.current && suffixRef.current.contains(target));\n  }\n\n  function handleChange(event) {\n    onChange && onChange(event.currentTarget.value, id);\n  }\n\n  function handleFocus(_ref2) {\n    var target = _ref2.target;\n\n    if (containsAffix(target)) {\n      return;\n    }\n\n    setFocus(true);\n  }\n\n  function handleBlur() {\n    setFocus(false);\n  }\n\n  function handleClick(_ref3) {\n    var target = _ref3.target;\n\n    var _inputRef$current;\n\n    if (containsAffix(target) || focus) {\n      return;\n    }\n\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n  }\n}\n\nfunction normalizeAriaMultiline(multiline) {\n  if (!multiline) return undefined;\n  return Boolean(multiline) || multiline > 0 ? {\n    'aria-multiline': true\n  } : undefined;\n}\n\nfunction getRows(multiline) {\n  if (!multiline) return undefined;\n  return typeof multiline === 'number' ? multiline : 1;\n}\n\nexport { TextField };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/TextField/TextField.js"],"names":["React","useState","useRef","useEffect","useCallback","createElement","CircleCancelMinor","classNames","variationName","useIsAfterInitialMount","Key","styles","Labelled","helpTextID","Connected","Spinner","Resizer","labelID","useI18n","useUniqueId","VisuallyHidden","Icon","TextField","prefix","suffix","verticalContent","placeholder","value","helpText","label","labelAction","labelHidden","disabled","clearButton","readOnly","autoFocus","focused","multiline","error","connectedRight","connectedLeft","type","name","idProp","id","role","step","autoComplete","max","maxLength","maxHeight","min","minLength","pattern","inputMode","spellCheck","ariaOwns","ariaControls","ariaExpanded","ariaActiveDescendant","ariaAutocomplete","showCharacterCount","align","requiredIndicator","monospaced","selectTextOnFocus","suggestion","onClearButtonClick","onChange","onFocus","onBlur","i18n","height","setHeight","Boolean","focus","setFocus","isAfterInitial","inputRef","textAreaRef","prefixRef","suffixRef","verticalContentRef","buttonPressTimer","input","current","undefined","blur","isSupportedInputType","setSelectionRange","length","normalizedValue","normalizedStep","normalizedMax","Infinity","normalizedMin","className","hasValue","inputType","prefixMarkup","Prefix","ref","suffixMarkup","Suffix","characterCountMarkup","characterCount","characterCountLabel","translate","count","limit","characterCountClassName","CharacterCount","AlignFieldBottom","characterCountText","clearButtonVisible","clearButtonClassNames","ClearButton","Hidden","clearButtonMarkup","onClick","handleClearButtonPress","source","color","handleNumberChange","steps","dpl","num","toString","split","numericValue","parseFloat","isNaN","decimalPlaces","Math","newValue","Number","String","toFixed","handleButtonRelease","clearTimeout","handleButtonPress","minInterval","decrementBy","interval","onChangeInterval","window","setTimeout","document","addEventListener","once","spinnerMarkup","onMouseDown","onMouseUp","style","handleExpandingResize","resizer","contents","currentHeight","minimumLines","onHeightChange","describedBy","push","labelledBy","unshift","inputClassName","Input","handleOnFocus","event","select","rows","getRows","join","normalizeAriaMultiline","onKeyPress","handleKeyPress","handleChange","onInput","inputWithVerticalContentMarkup","VerticalContent","inputMarkup","backdropClassName","Backdrop","action","left","right","handleFocus","handleBlur","handleClick","key","which","numbersSpec","Enter","test","preventDefault","containsAffix","target","HTMLElement","contains","currentTarget","_inputRef$current"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useCallback, createElement } from 'react';\nimport { CircleCancelMinor } from '@shopify/polaris-icons';\nimport { classNames, variationName } from '../../utilities/css.js';\nimport { useIsAfterInitialMount } from '../../utilities/use-is-after-initial-mount.js';\nimport { Key } from '../../types.js';\nimport styles from './TextField.scss.js';\nimport { Labelled, helpTextID } from '../Labelled/Labelled.js';\nimport { Connected } from '../Connected/Connected.js';\nimport { Spinner } from './components/Spinner/Spinner.js';\nimport { Resizer } from './components/Resizer/Resizer.js';\nimport { labelID } from '../Label/Label.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden.js';\nimport { Icon } from '../Icon/Icon.js';\n\nfunction TextField({\n  prefix,\n  suffix,\n  verticalContent,\n  placeholder,\n  value = '',\n  helpText,\n  label,\n  labelAction,\n  labelHidden,\n  disabled,\n  clearButton,\n  readOnly,\n  autoFocus,\n  focused,\n  multiline,\n  error,\n  connectedRight,\n  connectedLeft,\n  type = 'text',\n  name,\n  id: idProp,\n  role,\n  step,\n  autoComplete,\n  max,\n  maxLength,\n  maxHeight,\n  min,\n  minLength,\n  pattern,\n  inputMode,\n  spellCheck,\n  ariaOwns,\n  ariaControls,\n  ariaExpanded,\n  ariaActiveDescendant,\n  ariaAutocomplete,\n  showCharacterCount,\n  align,\n  requiredIndicator,\n  monospaced,\n  selectTextOnFocus,\n  suggestion,\n  onClearButtonClick,\n  onChange,\n  onFocus,\n  onBlur\n}) {\n  const i18n = useI18n();\n  const [height, setHeight] = useState(null);\n  const [focus, setFocus] = useState(Boolean(focused));\n  const isAfterInitial = useIsAfterInitialMount();\n  const id = useUniqueId('TextField', idProp);\n  const inputRef = useRef(null);\n  const textAreaRef = useRef(null);\n  const prefixRef = useRef(null);\n  const suffixRef = useRef(null);\n  const verticalContentRef = useRef(null);\n  const buttonPressTimer = useRef();\n  useEffect(() => {\n    const input = inputRef.current;\n    if (!input || focused === undefined) return;\n    focused ? input.focus() : input.blur();\n  }, [focused]);\n  useEffect(() => {\n    const input = inputRef.current;\n    const isSupportedInputType = type === 'text' || type === 'tel' || type === 'search' || type === 'url' || type === 'password';\n\n    if (!input || !isSupportedInputType || !suggestion) {\n      return;\n    }\n\n    input.setSelectionRange(value.length, suggestion.length);\n  }, [focus, value, type, suggestion]);\n  const normalizedValue = suggestion ? suggestion : value;\n  const normalizedStep = step != null ? step : 1;\n  const normalizedMax = max != null ? max : Infinity;\n  const normalizedMin = min != null ? min : -Infinity;\n  const className = classNames(styles.TextField, Boolean(normalizedValue) && styles.hasValue, disabled && styles.disabled, readOnly && styles.readOnly, error && styles.error, multiline && styles.multiline, focus && styles.focus);\n  const inputType = type === 'currency' ? 'text' : type;\n  const prefixMarkup = prefix ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Prefix,\n    id: `${id}-Prefix`,\n    ref: prefixRef\n  }, prefix) : null;\n  const suffixMarkup = suffix ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Suffix,\n    id: `${id}-Suffix`,\n    ref: suffixRef\n  }, suffix) : null;\n  let characterCountMarkup = null;\n\n  if (showCharacterCount) {\n    const characterCount = normalizedValue.length;\n    const characterCountLabel = maxLength ? i18n.translate('Polaris.TextField.characterCountWithMaxLength', {\n      count: characterCount,\n      limit: maxLength\n    }) : i18n.translate('Polaris.TextField.characterCount', {\n      count: characterCount\n    });\n    const characterCountClassName = classNames(styles.CharacterCount, multiline && styles.AlignFieldBottom);\n    const characterCountText = !maxLength ? characterCount : `${characterCount}/${maxLength}`;\n    characterCountMarkup = /*#__PURE__*/React.createElement(\"div\", {\n      id: `${id}-CharacterCounter`,\n      className: characterCountClassName,\n      \"aria-label\": characterCountLabel,\n      \"aria-live\": focus ? 'polite' : 'off',\n      \"aria-atomic\": \"true\"\n    }, characterCountText);\n  }\n\n  const clearButtonVisible = normalizedValue !== '';\n  const clearButtonClassNames = classNames(styles.ClearButton, !clearButtonVisible && styles.Hidden);\n  const clearButtonMarkup = clearButton ? /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: clearButtonClassNames,\n    onClick: handleClearButtonPress,\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(VisuallyHidden, null, i18n.translate('Polaris.Common.clear')), /*#__PURE__*/React.createElement(Icon, {\n    source: CircleCancelMinor,\n    color: \"base\"\n  })) : null;\n  const handleNumberChange = useCallback(steps => {\n    if (onChange == null) {\n      return;\n    } // Returns the length of decimal places in a number\n\n\n    const dpl = num => (num.toString().split('.')[1] || []).length;\n\n    const numericValue = value ? parseFloat(value) : 0;\n\n    if (isNaN(numericValue)) {\n      return;\n    } // Making sure the new value has the same length of decimal places as the\n    // step / value has.\n\n\n    const decimalPlaces = Math.max(dpl(numericValue), dpl(normalizedStep));\n    const newValue = Math.min(Number(normalizedMax), Math.max(numericValue + steps * normalizedStep, Number(normalizedMin)));\n    onChange(String(newValue.toFixed(decimalPlaces)), id);\n  }, [id, normalizedMax, normalizedMin, onChange, normalizedStep, value]);\n  const handleButtonRelease = useCallback(() => {\n    clearTimeout(buttonPressTimer.current);\n  }, []);\n  const handleButtonPress = useCallback(onChange => {\n    const minInterval = 50;\n    const decrementBy = 10;\n    let interval = 200;\n\n    const onChangeInterval = () => {\n      if (interval > minInterval) interval -= decrementBy;\n      onChange(0);\n      buttonPressTimer.current = window.setTimeout(onChangeInterval, interval);\n    };\n\n    buttonPressTimer.current = window.setTimeout(onChangeInterval, interval);\n    document.addEventListener('mouseup', handleButtonRelease, {\n      once: true\n    });\n  }, [handleButtonRelease]);\n  const spinnerMarkup = type === 'number' && step !== 0 && !disabled && !readOnly ? /*#__PURE__*/React.createElement(Spinner, {\n    onChange: handleNumberChange,\n    onMouseDown: handleButtonPress,\n    onMouseUp: handleButtonRelease\n  }) : null;\n  const style = multiline && height ? {\n    height,\n    maxHeight\n  } : null;\n  const handleExpandingResize = useCallback(height => {\n    setHeight(height);\n  }, []);\n  const resizer = multiline && isAfterInitial ? /*#__PURE__*/React.createElement(Resizer, {\n    contents: normalizedValue || placeholder,\n    currentHeight: height,\n    minimumLines: typeof multiline === 'number' ? multiline : 1,\n    onHeightChange: handleExpandingResize\n  }) : null;\n  const describedBy = [];\n\n  if (error) {\n    describedBy.push(`${id}Error`);\n  }\n\n  if (helpText) {\n    describedBy.push(helpTextID(id));\n  }\n\n  if (showCharacterCount) {\n    describedBy.push(`${id}-CharacterCounter`);\n  }\n\n  const labelledBy = [];\n\n  if (prefix) {\n    labelledBy.push(`${id}-Prefix`);\n  }\n\n  if (suffix) {\n    labelledBy.push(`${id}-Suffix`);\n  }\n\n  if (verticalContent) {\n    labelledBy.push(`${id}-VerticalContent`);\n  }\n\n  labelledBy.unshift(labelID(id));\n  const inputClassName = classNames(styles.Input, align && styles[variationName('Input-align', align)], suffix && styles['Input-suffixed'], clearButton && styles['Input-hasClearButton'], monospaced && styles.monospaced, suggestion && styles.suggestion);\n\n  const handleOnFocus = event => {\n    if (selectTextOnFocus && !suggestion) {\n      const input = multiline ? textAreaRef.current : inputRef.current;\n      input === null || input === void 0 ? void 0 : input.select();\n    }\n\n    if (onFocus) {\n      onFocus(event);\n    }\n  };\n\n  const input = /*#__PURE__*/createElement(multiline ? 'textarea' : 'input', {\n    name,\n    id,\n    disabled,\n    readOnly,\n    role,\n    autoFocus,\n    value: normalizedValue,\n    placeholder,\n    style,\n    autoComplete,\n    className: inputClassName,\n    ref: multiline ? textAreaRef : inputRef,\n    min,\n    max,\n    step,\n    minLength,\n    maxLength,\n    spellCheck,\n    pattern,\n    inputMode,\n    type: inputType,\n    rows: getRows(multiline),\n    'aria-describedby': describedBy.length ? describedBy.join(' ') : undefined,\n    'aria-labelledby': labelledBy.join(' '),\n    'aria-invalid': Boolean(error),\n    'aria-owns': ariaOwns,\n    'aria-activedescendant': ariaActiveDescendant,\n    'aria-autocomplete': ariaAutocomplete,\n    'aria-controls': ariaControls,\n    'aria-expanded': ariaExpanded,\n    'aria-required': requiredIndicator,\n    ...normalizeAriaMultiline(multiline),\n    onFocus: handleOnFocus,\n    onBlur,\n    onKeyPress: handleKeyPress,\n    onChange: !suggestion ? handleChange : undefined,\n    onInput: suggestion ? handleChange : undefined\n  });\n  const inputWithVerticalContentMarkup = verticalContent ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.VerticalContent,\n    id: `${id}-VerticalContent`,\n    ref: verticalContentRef\n  }, verticalContent, input) : null;\n  const inputMarkup = verticalContent ? inputWithVerticalContentMarkup : input;\n  const backdropClassName = classNames(styles.Backdrop, connectedLeft && styles['Backdrop-connectedLeft'], connectedRight && styles['Backdrop-connectedRight']);\n  return /*#__PURE__*/React.createElement(Labelled, {\n    label: label,\n    id: id,\n    error: error,\n    action: labelAction,\n    labelHidden: labelHidden,\n    helpText: helpText,\n    requiredIndicator: requiredIndicator\n  }, /*#__PURE__*/React.createElement(Connected, {\n    left: connectedLeft,\n    right: connectedRight\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onClick: handleClick\n  }, prefixMarkup, inputMarkup, suffixMarkup, characterCountMarkup, clearButtonMarkup, spinnerMarkup, /*#__PURE__*/React.createElement(\"div\", {\n    className: backdropClassName\n  }), resizer)));\n\n  function handleClearButtonPress() {\n    onClearButtonClick && onClearButtonClick(id);\n  }\n\n  function handleKeyPress(event) {\n    const {\n      key,\n      which\n    } = event;\n    const numbersSpec = /[\\d.eE+-]$/;\n\n    if (type !== 'number' || which === Key.Enter || numbersSpec.test(key)) {\n      return;\n    }\n\n    event.preventDefault();\n  }\n\n  function containsAffix(target) {\n    return target instanceof HTMLElement && (prefixRef.current && prefixRef.current.contains(target) || suffixRef.current && suffixRef.current.contains(target));\n  }\n\n  function handleChange(event) {\n    onChange && onChange(event.currentTarget.value, id);\n  }\n\n  function handleFocus({\n    target\n  }) {\n    if (containsAffix(target)) {\n      return;\n    }\n\n    setFocus(true);\n  }\n\n  function handleBlur() {\n    setFocus(false);\n  }\n\n  function handleClick({\n    target\n  }) {\n    var _inputRef$current;\n\n    if (containsAffix(target) || focus) {\n      return;\n    }\n\n    (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n  }\n}\n\nfunction normalizeAriaMultiline(multiline) {\n  if (!multiline) return undefined;\n  return Boolean(multiline) || multiline > 0 ? {\n    'aria-multiline': true\n  } : undefined;\n}\n\nfunction getRows(multiline) {\n  if (!multiline) return undefined;\n  return typeof multiline === 'number' ? multiline : 1;\n}\n\nexport { TextField };\n"]},"metadata":{},"sourceType":"module"}