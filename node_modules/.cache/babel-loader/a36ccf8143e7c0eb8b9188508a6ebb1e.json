{"ast":null,"code":"import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { ArrowLeftMinor, ArrowRightMinor } from '@shopify/polaris-icons';\nimport { classNames } from '../../utilities/css.js';\nimport { isDateBefore, isDateAfter, getNextDisplayYear, getNextDisplayMonth, getPreviousDisplayYear, getPreviousDisplayMonth } from '../../utilities/dates.js';\nimport { monthName } from './utilities.js';\nimport styles from './DatePicker.scss.js';\nimport { Month } from './components/Month/Month.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { Button } from '../Button/Button.js';\n\nfunction DatePicker(_ref) {\n  let {\n    id,\n    selected,\n    month,\n    year,\n    allowRange,\n    multiMonth,\n    disableDatesBefore,\n    disableDatesAfter,\n    weekStartsOn = 0,\n    dayAccessibilityLabelPrefix,\n    onMonthChange,\n    onChange = noop\n  } = _ref;\n  const i18n = useI18n();\n  const [hoverDate, setHoverDate] = useState(undefined);\n  const [focusDate, setFocusDate] = useState(undefined);\n  useEffect(() => {\n    setFocusDate(undefined);\n  }, [selected]);\n  const handleFocus = useCallback(date => {\n    setFocusDate(date);\n  }, []);\n  const setFocusDateAndHandleMonthChange = useCallback(date => {\n    if (onMonthChange) {\n      onMonthChange(date.getMonth(), date.getFullYear());\n    }\n\n    setHoverDate(date);\n    setFocusDate(date);\n  }, [onMonthChange]);\n  const handleDateSelection = useCallback(range => {\n    const {\n      end\n    } = range;\n    setHoverDate(end);\n    setFocusDate(new Date(end));\n    onChange(range);\n  }, [onChange]);\n  const handleMonthChangeClick = useCallback((month, year) => {\n    if (!onMonthChange) {\n      return;\n    }\n\n    setFocusDate(undefined);\n    onMonthChange(month, year);\n  }, [onMonthChange]);\n  const handleHover = useCallback(date => {\n    setHoverDate(date);\n  }, []);\n  const handleKeyUp = useCallback(event => {\n    const {\n      key\n    } = event;\n    const range = deriveRange(selected);\n    const focusedDate = focusDate || range && range.start;\n\n    if (focusedDate == null) {\n      return;\n    }\n\n    if (key === 'ArrowUp') {\n      const previousWeek = new Date(focusedDate);\n      previousWeek.setDate(focusedDate.getDate() - 7);\n\n      if (!(disableDatesBefore && isDateBefore(previousWeek, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(previousWeek);\n      }\n    }\n\n    if (key === 'ArrowDown') {\n      const nextWeek = new Date(focusedDate);\n      nextWeek.setDate(focusedDate.getDate() + 7);\n\n      if (!(disableDatesAfter && isDateAfter(nextWeek, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(nextWeek);\n      }\n    }\n\n    if (key === 'ArrowRight') {\n      const tomorrow = new Date(focusedDate);\n      tomorrow.setDate(focusedDate.getDate() + 1);\n\n      if (!(disableDatesAfter && isDateAfter(tomorrow, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(tomorrow);\n      }\n    }\n\n    if (key === 'ArrowLeft') {\n      const yesterday = new Date(focusedDate);\n      yesterday.setDate(focusedDate.getDate() - 1);\n\n      if (!(disableDatesBefore && isDateBefore(yesterday, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(yesterday);\n      }\n    }\n  }, [disableDatesAfter, disableDatesBefore, focusDate, selected, setFocusDateAndHandleMonthChange]);\n  const showNextYear = getNextDisplayYear(month, year);\n  const showNextMonth = getNextDisplayMonth(month);\n  const showNextToNextYear = getNextDisplayYear(showNextMonth, showNextYear);\n  const showNextToNextMonth = getNextDisplayMonth(showNextMonth);\n  const showPreviousYear = getPreviousDisplayYear(month, year);\n  const showPreviousMonth = getPreviousDisplayMonth(month);\n  const previousMonthName = i18n.translate(`Polaris.DatePicker.months.${monthName(showPreviousMonth)}`);\n  const nextMonth = multiMonth ? i18n.translate(`Polaris.DatePicker.months.${monthName(showNextToNextMonth)}`) : i18n.translate(`Polaris.DatePicker.months.${monthName(showNextMonth)}`);\n  const nextYear = multiMonth ? showNextToNextYear : showNextYear;\n  const monthIsSelected = useMemo(() => deriveRange(selected), [selected]);\n  const firstDatePickerAccessibilityLabelPrefix = allowRange ? i18n.translate(`Polaris.DatePicker.start`) : dayAccessibilityLabelPrefix;\n  const secondDatePickerAccessibilityLabelPrefix = i18n.translate(`Polaris.DatePicker.end`);\n  const accessibilityLabelPrefixes = [firstDatePickerAccessibilityLabelPrefix, secondDatePickerAccessibilityLabelPrefix];\n  const secondDatePicker = multiMonth ? /*#__PURE__*/React.createElement(Month, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: showNextMonth,\n    year: showNextYear,\n    selected: monthIsSelected,\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn,\n    accessibilityLabelPrefixes: accessibilityLabelPrefixes\n  }) : null;\n  const datePickerClassName = classNames(styles.DatePicker);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: datePickerClassName,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Header\n  }, /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    icon: ArrowLeftMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.previousMonth', {\n      previousMonthName,\n      showPreviousYear\n    }),\n    onClick: () => handleMonthChangeClick(showPreviousMonth, showPreviousYear)\n  }), /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    icon: ArrowRightMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.nextMonth', {\n      nextMonth,\n      nextYear\n    }),\n    onClick: () => handleMonthChangeClick(showNextMonth, showNextYear)\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.MonthLayout\n  }, /*#__PURE__*/React.createElement(Month, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: month,\n    year: year,\n    selected: deriveRange(selected),\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn,\n    accessibilityLabelPrefixes: accessibilityLabelPrefixes\n  }), secondDatePicker));\n}\n\nfunction noop() {}\n\nfunction handleKeyDown(event) {\n  const {\n    key\n  } = event;\n\n  if (key === 'ArrowUp' || key === 'ArrowDown' || key === 'ArrowLeft' || key === 'ArrowRight') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction deriveRange(selected) {\n  return selected instanceof Date ? {\n    start: selected,\n    end: selected\n  } : selected;\n}\n\nexport { DatePicker };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/DatePicker/DatePicker.js"],"names":["React","useState","useEffect","useCallback","useMemo","ArrowLeftMinor","ArrowRightMinor","classNames","isDateBefore","isDateAfter","getNextDisplayYear","getNextDisplayMonth","getPreviousDisplayYear","getPreviousDisplayMonth","monthName","styles","Month","useI18n","Button","DatePicker","id","selected","month","year","allowRange","multiMonth","disableDatesBefore","disableDatesAfter","weekStartsOn","dayAccessibilityLabelPrefix","onMonthChange","onChange","noop","i18n","hoverDate","setHoverDate","undefined","focusDate","setFocusDate","handleFocus","date","setFocusDateAndHandleMonthChange","getMonth","getFullYear","handleDateSelection","range","end","Date","handleMonthChangeClick","handleHover","handleKeyUp","event","key","deriveRange","focusedDate","start","previousWeek","setDate","getDate","nextWeek","tomorrow","yesterday","showNextYear","showNextMonth","showNextToNextYear","showNextToNextMonth","showPreviousYear","showPreviousMonth","previousMonthName","translate","nextMonth","nextYear","monthIsSelected","firstDatePickerAccessibilityLabelPrefix","secondDatePickerAccessibilityLabelPrefix","accessibilityLabelPrefixes","secondDatePicker","createElement","onFocus","onHover","datePickerClassName","className","onKeyDown","handleKeyDown","onKeyUp","Header","plain","icon","accessibilityLabel","onClick","MonthLayout","preventDefault","stopPropagation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { ArrowLeftMinor, ArrowRightMinor } from '@shopify/polaris-icons';\nimport { classNames } from '../../utilities/css.js';\nimport { isDateBefore, isDateAfter, getNextDisplayYear, getNextDisplayMonth, getPreviousDisplayYear, getPreviousDisplayMonth } from '../../utilities/dates.js';\nimport { monthName } from './utilities.js';\nimport styles from './DatePicker.scss.js';\nimport { Month } from './components/Month/Month.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { Button } from '../Button/Button.js';\n\nfunction DatePicker({\n  id,\n  selected,\n  month,\n  year,\n  allowRange,\n  multiMonth,\n  disableDatesBefore,\n  disableDatesAfter,\n  weekStartsOn = 0,\n  dayAccessibilityLabelPrefix,\n  onMonthChange,\n  onChange = noop\n}) {\n  const i18n = useI18n();\n  const [hoverDate, setHoverDate] = useState(undefined);\n  const [focusDate, setFocusDate] = useState(undefined);\n  useEffect(() => {\n    setFocusDate(undefined);\n  }, [selected]);\n  const handleFocus = useCallback(date => {\n    setFocusDate(date);\n  }, []);\n  const setFocusDateAndHandleMonthChange = useCallback(date => {\n    if (onMonthChange) {\n      onMonthChange(date.getMonth(), date.getFullYear());\n    }\n\n    setHoverDate(date);\n    setFocusDate(date);\n  }, [onMonthChange]);\n  const handleDateSelection = useCallback(range => {\n    const {\n      end\n    } = range;\n    setHoverDate(end);\n    setFocusDate(new Date(end));\n    onChange(range);\n  }, [onChange]);\n  const handleMonthChangeClick = useCallback((month, year) => {\n    if (!onMonthChange) {\n      return;\n    }\n\n    setFocusDate(undefined);\n    onMonthChange(month, year);\n  }, [onMonthChange]);\n  const handleHover = useCallback(date => {\n    setHoverDate(date);\n  }, []);\n  const handleKeyUp = useCallback(event => {\n    const {\n      key\n    } = event;\n    const range = deriveRange(selected);\n    const focusedDate = focusDate || range && range.start;\n\n    if (focusedDate == null) {\n      return;\n    }\n\n    if (key === 'ArrowUp') {\n      const previousWeek = new Date(focusedDate);\n      previousWeek.setDate(focusedDate.getDate() - 7);\n\n      if (!(disableDatesBefore && isDateBefore(previousWeek, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(previousWeek);\n      }\n    }\n\n    if (key === 'ArrowDown') {\n      const nextWeek = new Date(focusedDate);\n      nextWeek.setDate(focusedDate.getDate() + 7);\n\n      if (!(disableDatesAfter && isDateAfter(nextWeek, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(nextWeek);\n      }\n    }\n\n    if (key === 'ArrowRight') {\n      const tomorrow = new Date(focusedDate);\n      tomorrow.setDate(focusedDate.getDate() + 1);\n\n      if (!(disableDatesAfter && isDateAfter(tomorrow, disableDatesAfter))) {\n        setFocusDateAndHandleMonthChange(tomorrow);\n      }\n    }\n\n    if (key === 'ArrowLeft') {\n      const yesterday = new Date(focusedDate);\n      yesterday.setDate(focusedDate.getDate() - 1);\n\n      if (!(disableDatesBefore && isDateBefore(yesterday, disableDatesBefore))) {\n        setFocusDateAndHandleMonthChange(yesterday);\n      }\n    }\n  }, [disableDatesAfter, disableDatesBefore, focusDate, selected, setFocusDateAndHandleMonthChange]);\n  const showNextYear = getNextDisplayYear(month, year);\n  const showNextMonth = getNextDisplayMonth(month);\n  const showNextToNextYear = getNextDisplayYear(showNextMonth, showNextYear);\n  const showNextToNextMonth = getNextDisplayMonth(showNextMonth);\n  const showPreviousYear = getPreviousDisplayYear(month, year);\n  const showPreviousMonth = getPreviousDisplayMonth(month);\n  const previousMonthName = i18n.translate(`Polaris.DatePicker.months.${monthName(showPreviousMonth)}`);\n  const nextMonth = multiMonth ? i18n.translate(`Polaris.DatePicker.months.${monthName(showNextToNextMonth)}`) : i18n.translate(`Polaris.DatePicker.months.${monthName(showNextMonth)}`);\n  const nextYear = multiMonth ? showNextToNextYear : showNextYear;\n  const monthIsSelected = useMemo(() => deriveRange(selected), [selected]);\n  const firstDatePickerAccessibilityLabelPrefix = allowRange ? i18n.translate(`Polaris.DatePicker.start`) : dayAccessibilityLabelPrefix;\n  const secondDatePickerAccessibilityLabelPrefix = i18n.translate(`Polaris.DatePicker.end`);\n  const accessibilityLabelPrefixes = [firstDatePickerAccessibilityLabelPrefix, secondDatePickerAccessibilityLabelPrefix];\n  const secondDatePicker = multiMonth ? /*#__PURE__*/React.createElement(Month, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: showNextMonth,\n    year: showNextYear,\n    selected: monthIsSelected,\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn,\n    accessibilityLabelPrefixes: accessibilityLabelPrefixes\n  }) : null;\n  const datePickerClassName = classNames(styles.DatePicker);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: id,\n    className: datePickerClassName,\n    onKeyDown: handleKeyDown,\n    onKeyUp: handleKeyUp\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Header\n  }, /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    icon: ArrowLeftMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.previousMonth', {\n      previousMonthName,\n      showPreviousYear\n    }),\n    onClick: () => handleMonthChangeClick(showPreviousMonth, showPreviousYear)\n  }), /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    icon: ArrowRightMinor,\n    accessibilityLabel: i18n.translate('Polaris.DatePicker.nextMonth', {\n      nextMonth,\n      nextYear\n    }),\n    onClick: () => handleMonthChangeClick(showNextMonth, showNextYear)\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.MonthLayout\n  }, /*#__PURE__*/React.createElement(Month, {\n    onFocus: handleFocus,\n    focusedDate: focusDate,\n    month: month,\n    year: year,\n    selected: deriveRange(selected),\n    hoverDate: hoverDate,\n    onChange: handleDateSelection,\n    onHover: handleHover,\n    disableDatesBefore: disableDatesBefore,\n    disableDatesAfter: disableDatesAfter,\n    allowRange: allowRange,\n    weekStartsOn: weekStartsOn,\n    accessibilityLabelPrefixes: accessibilityLabelPrefixes\n  }), secondDatePicker));\n}\n\nfunction noop() {}\n\nfunction handleKeyDown(event) {\n  const {\n    key\n  } = event;\n\n  if (key === 'ArrowUp' || key === 'ArrowDown' || key === 'ArrowLeft' || key === 'ArrowRight') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction deriveRange(selected) {\n  return selected instanceof Date ? {\n    start: selected,\n    end: selected\n  } : selected;\n}\n\nexport { DatePicker };\n"]},"metadata":{},"sourceType":"module"}