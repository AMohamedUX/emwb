{"ast":null,"code":"import _slicedToArray from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useState, Children, useRef, useCallback, useMemo } from 'react';\nimport styles from './Combobox.scss.js';\nimport { ComboboxTextFieldContext, ComboboxListboxContext, ComboboxListboxOptionContext } from '../../utilities/combobox/context.js';\nimport { TextField } from './components/TextField/TextField.js';\nimport { Popover } from '../Popover/Popover.js';\n\nfunction Combobox(_ref) {\n  var activator = _ref.activator,\n      allowMultiple = _ref.allowMultiple,\n      children = _ref.children,\n      _ref$preferredPositio = _ref.preferredPosition,\n      preferredPosition = _ref$preferredPositio === void 0 ? 'below' : _ref$preferredPositio,\n      willLoadMoreOptions = _ref.willLoadMoreOptions,\n      height = _ref.height,\n      onScrolledToBottom = _ref.onScrolledToBottom,\n      onClose = _ref.onClose;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      popoverActive = _useState2[0],\n      setPopoverActive = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeOptionId = _useState4[0],\n      setActiveOptionId = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      textFieldLabelId = _useState6[0],\n      setTextFieldLabelId = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      listboxId = _useState8[0],\n      setListboxId = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      textFieldFocused = _useState10[0],\n      setTextFieldFocused = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      disableCloseOnSelect = _useState12[0],\n      setDisableCloseOnSelect = _useState12[1];\n\n  var shouldOpen = Boolean(!popoverActive && Children.count(children) > 0);\n  var ref = useRef(null);\n  var handleClose = useCallback(function () {\n    // only deactive popover if not creating a new option\n    if (!disableCloseOnSelect) {\n      setPopoverActive(false);\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n    }\n\n    setActiveOptionId(undefined);\n  }, [disableCloseOnSelect, onClose]);\n  var handleOpen = useCallback(function () {\n    setPopoverActive(true);\n    setActiveOptionId(undefined);\n  }, []);\n  var onOptionSelected = useCallback(function () {\n    var _ref$current;\n\n    if (!allowMultiple) {\n      handleClose();\n      setActiveOptionId(undefined);\n      return;\n    } else {\n      setDisableCloseOnSelect(true);\n    }\n\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.forceUpdatePosition();\n  }, [allowMultiple, handleClose, setDisableCloseOnSelect]);\n  var handleFocus = useCallback(function () {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  var handleChange = useCallback(function () {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  var handleBlur = useCallback(function () {\n    setDisableCloseOnSelect(false);\n\n    if (popoverActive) {\n      handleClose();\n    }\n  }, [popoverActive, handleClose, setDisableCloseOnSelect]);\n  var textFieldContextValue = useMemo(function () {\n    return {\n      activeOptionId: activeOptionId,\n      expanded: popoverActive,\n      listboxId: listboxId,\n      setTextFieldFocused: setTextFieldFocused,\n      setTextFieldLabelId: setTextFieldLabelId,\n      onTextFieldFocus: handleFocus,\n      onTextFieldChange: handleChange,\n      onTextFieldBlur: handleBlur\n    };\n  }, [activeOptionId, popoverActive, listboxId, setTextFieldFocused, setTextFieldLabelId, handleFocus, handleChange, handleBlur]);\n  var listboxOptionContextValue = useMemo(function () {\n    return {\n      allowMultiple: allowMultiple\n    };\n  }, [allowMultiple]);\n  var listboxContextValue = useMemo(function () {\n    return {\n      listboxId: listboxId,\n      textFieldLabelId: textFieldLabelId,\n      textFieldFocused: textFieldFocused,\n      willLoadMoreOptions: willLoadMoreOptions,\n      onOptionSelected: onOptionSelected,\n      setActiveOptionId: setActiveOptionId,\n      setListboxId: setListboxId,\n      onKeyToBottom: onScrolledToBottom\n    };\n  }, [listboxId, textFieldLabelId, textFieldFocused, willLoadMoreOptions, onOptionSelected, setActiveOptionId, setListboxId, onScrolledToBottom]);\n  return /*#__PURE__*/React.createElement(Popover, {\n    ref: ref,\n    active: popoverActive,\n    activator: /*#__PURE__*/React.createElement(ComboboxTextFieldContext.Provider, {\n      value: textFieldContextValue\n    }, activator),\n    autofocusTarget: \"none\",\n    preventFocusOnClose: true,\n    fullWidth: true,\n    preferInputActivator: false,\n    preferredPosition: preferredPosition,\n    onClose: handleClose\n  }, Children.count(children) > 0 ? /*#__PURE__*/React.createElement(Popover.Pane, {\n    onScrolledToBottom: onScrolledToBottom,\n    height: height\n  }, /*#__PURE__*/React.createElement(ComboboxListboxContext.Provider, {\n    value: listboxContextValue\n  }, /*#__PURE__*/React.createElement(ComboboxListboxOptionContext.Provider, {\n    value: listboxOptionContextValue\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Listbox\n  }, children)))) : null);\n}\n\nCombobox.TextField = TextField;\nexport { Combobox };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/Combobox/Combobox.js"],"names":["React","useState","Children","useRef","useCallback","useMemo","styles","ComboboxTextFieldContext","ComboboxListboxContext","ComboboxListboxOptionContext","TextField","Popover","Combobox","activator","allowMultiple","children","preferredPosition","willLoadMoreOptions","height","onScrolledToBottom","onClose","popoverActive","setPopoverActive","activeOptionId","setActiveOptionId","textFieldLabelId","setTextFieldLabelId","listboxId","setListboxId","textFieldFocused","setTextFieldFocused","disableCloseOnSelect","setDisableCloseOnSelect","shouldOpen","Boolean","count","ref","handleClose","undefined","handleOpen","onOptionSelected","_ref$current","current","forceUpdatePosition","handleFocus","handleChange","handleBlur","textFieldContextValue","expanded","onTextFieldFocus","onTextFieldChange","onTextFieldBlur","listboxOptionContextValue","listboxContextValue","onKeyToBottom","createElement","active","Provider","value","autofocusTarget","preventFocusOnClose","fullWidth","preferInputActivator","Pane","className","Listbox"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,QAA1B,EAAoCC,MAApC,EAA4CC,WAA5C,EAAyDC,OAAzD,QAAwE,OAAxE;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,SAASC,wBAAT,EAAmCC,sBAAnC,EAA2DC,4BAA3D,QAA+F,qCAA/F;AACA,SAASC,SAAT,QAA0B,qCAA1B;AACA,SAASC,OAAT,QAAwB,uBAAxB;;AAEA,SAASC,QAAT,OASG;AAAA,MARDC,SAQC,QARDA,SAQC;AAAA,MAPDC,aAOC,QAPDA,aAOC;AAAA,MANDC,QAMC,QANDA,QAMC;AAAA,mCALDC,iBAKC;AAAA,MALDA,iBAKC,sCALmB,OAKnB;AAAA,MAJDC,mBAIC,QAJDA,mBAIC;AAAA,MAHDC,MAGC,QAHDA,MAGC;AAAA,MAFDC,kBAEC,QAFDA,kBAEC;AAAA,MADDC,OACC,QADDA,OACC;;AACD,kBAA0CnB,QAAQ,CAAC,KAAD,CAAlD;AAAA;AAAA,MAAOoB,aAAP;AAAA,MAAsBC,gBAAtB;;AACA,mBAA4CrB,QAAQ,EAApD;AAAA;AAAA,MAAOsB,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,mBAAgDvB,QAAQ,EAAxD;AAAA;AAAA,MAAOwB,gBAAP;AAAA,MAAyBC,mBAAzB;;AACA,mBAAkCzB,QAAQ,EAA1C;AAAA;AAAA,MAAO0B,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAgD3B,QAAQ,CAAC,KAAD,CAAxD;AAAA;AAAA,MAAO4B,gBAAP;AAAA,MAAyBC,mBAAzB;;AACA,oBAAwD7B,QAAQ,CAAC,KAAD,CAAhE;AAAA;AAAA,MAAO8B,oBAAP;AAAA,MAA6BC,uBAA7B;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAAC,CAACb,aAAD,IAAkBnB,QAAQ,CAACiC,KAAT,CAAepB,QAAf,IAA2B,CAA9C,CAA1B;AACA,MAAMqB,GAAG,GAAGjC,MAAM,CAAC,IAAD,CAAlB;AACA,MAAMkC,WAAW,GAAGjC,WAAW,CAAC,YAAM;AACpC;AACA,QAAI,CAAC2B,oBAAL,EAA2B;AACzBT,MAAAA,gBAAgB,CAAC,KAAD,CAAhB;AACAF,MAAAA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAK,KAAK,CAArC,GAAyC,KAAK,CAA9C,GAAkDA,OAAO,EAAzD;AACD;;AAEDI,IAAAA,iBAAiB,CAACc,SAAD,CAAjB;AACD,GAR8B,EAQ5B,CAACP,oBAAD,EAAuBX,OAAvB,CAR4B,CAA/B;AASA,MAAMmB,UAAU,GAAGnC,WAAW,CAAC,YAAM;AACnCkB,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAE,IAAAA,iBAAiB,CAACc,SAAD,CAAjB;AACD,GAH6B,EAG3B,EAH2B,CAA9B;AAIA,MAAME,gBAAgB,GAAGpC,WAAW,CAAC,YAAM;AACzC,QAAIqC,YAAJ;;AAEA,QAAI,CAAC3B,aAAL,EAAoB;AAClBuB,MAAAA,WAAW;AACXb,MAAAA,iBAAiB,CAACc,SAAD,CAAjB;AACA;AACD,KAJD,MAIO;AACLN,MAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACD;;AAED,KAACS,YAAY,GAAGL,GAAG,CAACM,OAApB,MAAiC,IAAjC,IAAyCD,YAAY,KAAK,KAAK,CAA/D,GAAmE,KAAK,CAAxE,GAA4EA,YAAY,CAACE,mBAAb,EAA5E;AACD,GAZmC,EAYjC,CAAC7B,aAAD,EAAgBuB,WAAhB,EAA6BL,uBAA7B,CAZiC,CAApC;AAaA,MAAMY,WAAW,GAAGxC,WAAW,CAAC,YAAM;AACpC,QAAI6B,UAAJ,EAAgB;AACdM,MAAAA,UAAU;AACX;AACF,GAJ8B,EAI5B,CAACN,UAAD,EAAaM,UAAb,CAJ4B,CAA/B;AAKA,MAAMM,YAAY,GAAGzC,WAAW,CAAC,YAAM;AACrC,QAAI6B,UAAJ,EAAgB;AACdM,MAAAA,UAAU;AACX;AACF,GAJ+B,EAI7B,CAACN,UAAD,EAAaM,UAAb,CAJ6B,CAAhC;AAKA,MAAMO,UAAU,GAAG1C,WAAW,CAAC,YAAM;AACnC4B,IAAAA,uBAAuB,CAAC,KAAD,CAAvB;;AAEA,QAAIX,aAAJ,EAAmB;AACjBgB,MAAAA,WAAW;AACZ;AACF,GAN6B,EAM3B,CAAChB,aAAD,EAAgBgB,WAAhB,EAA6BL,uBAA7B,CAN2B,CAA9B;AAOA,MAAMe,qBAAqB,GAAG1C,OAAO,CAAC;AAAA,WAAO;AAC3CkB,MAAAA,cAAc,EAAdA,cAD2C;AAE3CyB,MAAAA,QAAQ,EAAE3B,aAFiC;AAG3CM,MAAAA,SAAS,EAATA,SAH2C;AAI3CG,MAAAA,mBAAmB,EAAnBA,mBAJ2C;AAK3CJ,MAAAA,mBAAmB,EAAnBA,mBAL2C;AAM3CuB,MAAAA,gBAAgB,EAAEL,WANyB;AAO3CM,MAAAA,iBAAiB,EAAEL,YAPwB;AAQ3CM,MAAAA,eAAe,EAAEL;AAR0B,KAAP;AAAA,GAAD,EASjC,CAACvB,cAAD,EAAiBF,aAAjB,EAAgCM,SAAhC,EAA2CG,mBAA3C,EAAgEJ,mBAAhE,EAAqFkB,WAArF,EAAkGC,YAAlG,EAAgHC,UAAhH,CATiC,CAArC;AAUA,MAAMM,yBAAyB,GAAG/C,OAAO,CAAC;AAAA,WAAO;AAC/CS,MAAAA,aAAa,EAAbA;AAD+C,KAAP;AAAA,GAAD,EAErC,CAACA,aAAD,CAFqC,CAAzC;AAGA,MAAMuC,mBAAmB,GAAGhD,OAAO,CAAC;AAAA,WAAO;AACzCsB,MAAAA,SAAS,EAATA,SADyC;AAEzCF,MAAAA,gBAAgB,EAAhBA,gBAFyC;AAGzCI,MAAAA,gBAAgB,EAAhBA,gBAHyC;AAIzCZ,MAAAA,mBAAmB,EAAnBA,mBAJyC;AAKzCuB,MAAAA,gBAAgB,EAAhBA,gBALyC;AAMzChB,MAAAA,iBAAiB,EAAjBA,iBANyC;AAOzCI,MAAAA,YAAY,EAAZA,YAPyC;AAQzC0B,MAAAA,aAAa,EAAEnC;AAR0B,KAAP;AAAA,GAAD,EAS/B,CAACQ,SAAD,EAAYF,gBAAZ,EAA8BI,gBAA9B,EAAgDZ,mBAAhD,EAAqEuB,gBAArE,EAAuFhB,iBAAvF,EAA0GI,YAA1G,EAAwHT,kBAAxH,CAT+B,CAAnC;AAUA,SAAO,aAAanB,KAAK,CAACuD,aAAN,CAAoB5C,OAApB,EAA6B;AAC/CyB,IAAAA,GAAG,EAAEA,GAD0C;AAE/CoB,IAAAA,MAAM,EAAEnC,aAFuC;AAG/CR,IAAAA,SAAS,EAAE,aAAab,KAAK,CAACuD,aAAN,CAAoBhD,wBAAwB,CAACkD,QAA7C,EAAuD;AAC7EC,MAAAA,KAAK,EAAEX;AADsE,KAAvD,EAErBlC,SAFqB,CAHuB;AAM/C8C,IAAAA,eAAe,EAAE,MAN8B;AAO/CC,IAAAA,mBAAmB,EAAE,IAP0B;AAQ/CC,IAAAA,SAAS,EAAE,IARoC;AAS/CC,IAAAA,oBAAoB,EAAE,KATyB;AAU/C9C,IAAAA,iBAAiB,EAAEA,iBAV4B;AAW/CI,IAAAA,OAAO,EAAEiB;AAXsC,GAA7B,EAYjBnC,QAAQ,CAACiC,KAAT,CAAepB,QAAf,IAA2B,CAA3B,GAA+B,aAAaf,KAAK,CAACuD,aAAN,CAAoB5C,OAAO,CAACoD,IAA5B,EAAkC;AAC/E5C,IAAAA,kBAAkB,EAAEA,kBAD2D;AAE/ED,IAAAA,MAAM,EAAEA;AAFuE,GAAlC,EAG5C,aAAalB,KAAK,CAACuD,aAAN,CAAoB/C,sBAAsB,CAACiD,QAA3C,EAAqD;AACnEC,IAAAA,KAAK,EAAEL;AAD4D,GAArD,EAEb,aAAarD,KAAK,CAACuD,aAAN,CAAoB9C,4BAA4B,CAACgD,QAAjD,EAA2D;AACzEC,IAAAA,KAAK,EAAEN;AADkE,GAA3D,EAEb,aAAapD,KAAK,CAACuD,aAAN,CAAoB,KAApB,EAA2B;AACzCS,IAAAA,SAAS,EAAE1D,MAAM,CAAC2D;AADuB,GAA3B,EAEblD,QAFa,CAFA,CAFA,CAH+B,CAA5C,GASe,IArBE,CAApB;AAsBD;;AACDH,QAAQ,CAACF,SAAT,GAAqBA,SAArB;AAEA,SAASE,QAAT","sourcesContent":["import React, { useState, Children, useRef, useCallback, useMemo } from 'react';\nimport styles from './Combobox.scss.js';\nimport { ComboboxTextFieldContext, ComboboxListboxContext, ComboboxListboxOptionContext } from '../../utilities/combobox/context.js';\nimport { TextField } from './components/TextField/TextField.js';\nimport { Popover } from '../Popover/Popover.js';\n\nfunction Combobox({\n  activator,\n  allowMultiple,\n  children,\n  preferredPosition = 'below',\n  willLoadMoreOptions,\n  height,\n  onScrolledToBottom,\n  onClose\n}) {\n  const [popoverActive, setPopoverActive] = useState(false);\n  const [activeOptionId, setActiveOptionId] = useState();\n  const [textFieldLabelId, setTextFieldLabelId] = useState();\n  const [listboxId, setListboxId] = useState();\n  const [textFieldFocused, setTextFieldFocused] = useState(false);\n  const [disableCloseOnSelect, setDisableCloseOnSelect] = useState(false);\n  const shouldOpen = Boolean(!popoverActive && Children.count(children) > 0);\n  const ref = useRef(null);\n  const handleClose = useCallback(() => {\n    // only deactive popover if not creating a new option\n    if (!disableCloseOnSelect) {\n      setPopoverActive(false);\n      onClose === null || onClose === void 0 ? void 0 : onClose();\n    }\n\n    setActiveOptionId(undefined);\n  }, [disableCloseOnSelect, onClose]);\n  const handleOpen = useCallback(() => {\n    setPopoverActive(true);\n    setActiveOptionId(undefined);\n  }, []);\n  const onOptionSelected = useCallback(() => {\n    var _ref$current;\n\n    if (!allowMultiple) {\n      handleClose();\n      setActiveOptionId(undefined);\n      return;\n    } else {\n      setDisableCloseOnSelect(true);\n    }\n\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.forceUpdatePosition();\n  }, [allowMultiple, handleClose, setDisableCloseOnSelect]);\n  const handleFocus = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleChange = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleBlur = useCallback(() => {\n    setDisableCloseOnSelect(false);\n\n    if (popoverActive) {\n      handleClose();\n    }\n  }, [popoverActive, handleClose, setDisableCloseOnSelect]);\n  const textFieldContextValue = useMemo(() => ({\n    activeOptionId,\n    expanded: popoverActive,\n    listboxId,\n    setTextFieldFocused,\n    setTextFieldLabelId,\n    onTextFieldFocus: handleFocus,\n    onTextFieldChange: handleChange,\n    onTextFieldBlur: handleBlur\n  }), [activeOptionId, popoverActive, listboxId, setTextFieldFocused, setTextFieldLabelId, handleFocus, handleChange, handleBlur]);\n  const listboxOptionContextValue = useMemo(() => ({\n    allowMultiple\n  }), [allowMultiple]);\n  const listboxContextValue = useMemo(() => ({\n    listboxId,\n    textFieldLabelId,\n    textFieldFocused,\n    willLoadMoreOptions,\n    onOptionSelected,\n    setActiveOptionId,\n    setListboxId,\n    onKeyToBottom: onScrolledToBottom\n  }), [listboxId, textFieldLabelId, textFieldFocused, willLoadMoreOptions, onOptionSelected, setActiveOptionId, setListboxId, onScrolledToBottom]);\n  return /*#__PURE__*/React.createElement(Popover, {\n    ref: ref,\n    active: popoverActive,\n    activator: /*#__PURE__*/React.createElement(ComboboxTextFieldContext.Provider, {\n      value: textFieldContextValue\n    }, activator),\n    autofocusTarget: \"none\",\n    preventFocusOnClose: true,\n    fullWidth: true,\n    preferInputActivator: false,\n    preferredPosition: preferredPosition,\n    onClose: handleClose\n  }, Children.count(children) > 0 ? /*#__PURE__*/React.createElement(Popover.Pane, {\n    onScrolledToBottom: onScrolledToBottom,\n    height: height\n  }, /*#__PURE__*/React.createElement(ComboboxListboxContext.Provider, {\n    value: listboxContextValue\n  }, /*#__PURE__*/React.createElement(ComboboxListboxOptionContext.Provider, {\n    value: listboxOptionContextValue\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Listbox\n  }, children)))) : null);\n}\nCombobox.TextField = TextField;\n\nexport { Combobox };\n"]},"metadata":{},"sourceType":"module"}