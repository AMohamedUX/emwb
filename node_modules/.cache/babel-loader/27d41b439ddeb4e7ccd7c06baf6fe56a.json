{"ast":null,"code":"import _defineProperty from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classCallCheck from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/ayubmohamed/emwb/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport React, { Component, createRef } from 'react';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Key } from '../../../../types.js';\nimport sharedStyles from '../../RangeSlider.scss.js';\nimport styles from './DualThumb.scss.js';\nimport { Labelled } from '../../../Labelled/Labelled.js';\nimport { labelID } from '../../../Label/Label.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nvar DualThumb = /*#__PURE__*/function (_Component) {\n  _inherits(DualThumb, _Component);\n\n  var _super = _createSuper(DualThumb);\n\n  function DualThumb() {\n    var _this;\n\n    _classCallCheck(this, DualThumb);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.context = void 0;\n    _this.state = {\n      value: sanitizeValue(_this.props.value, _this.props.min, _this.props.max, _this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    _this.track = /*#__PURE__*/createRef();\n    _this.trackWrapper = /*#__PURE__*/createRef();\n    _this.thumbLower = /*#__PURE__*/createRef();\n    _this.thumbUpper = /*#__PURE__*/createRef();\n    _this.setTrackPosition = debounce(function () {\n      if (_this.track.current) {\n        var thumbSize = 16;\n\n        var _this$track$current$g = _this.track.current.getBoundingClientRect(),\n            width = _this$track$current$g.width,\n            left = _this$track$current$g.left;\n\n        var adjustedTrackWidth = width - thumbSize;\n        var adjustedTrackLeft = left + thumbSize / 2;\n        var range = _this.props.max - _this.props.min;\n        var minValuePosition = _this.props.min / range * adjustedTrackWidth;\n\n        _this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft - minValuePosition\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    _this.handleMouseDownThumbLower = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      registerMouseMoveHandler(_this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    _this.handleMouseMoveThumbLower = function (event) {\n      var valueUpper = _this.state.value[1];\n\n      _this.setValue([_this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    _this.handleTouchStartThumbLower = function (event) {\n      if (_this.props.disabled) return;\n      registerTouchMoveHandler(_this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    _this.handleTouchMoveThumbLower = function (event) {\n      event.preventDefault();\n      var valueUpper = _this.state.value[1];\n\n      _this.setValue([_this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    _this.handleMouseDownThumbUpper = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      registerMouseMoveHandler(_this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    _this.handleMouseMoveThumbUpper = function (event) {\n      var valueLower = _this.state.value[0];\n\n      _this.setValue([valueLower, _this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    _this.handleTouchStartThumbUpper = function (event) {\n      if (_this.props.disabled) return;\n      registerTouchMoveHandler(_this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    _this.handleTouchMoveThumbUpper = function (event) {\n      event.preventDefault();\n      var valueLower = _this.state.value[0];\n\n      _this.setValue([valueLower, _this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    _this.handleKeypressLower = function (event) {\n      var _handlerMap;\n\n      if (_this.props.disabled) return;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          incrementValueLower = _assertThisInitialize.incrementValueLower,\n          decrementValueLower = _assertThisInitialize.decrementValueLower;\n\n      var handlerMap = (_handlerMap = {}, _defineProperty(_handlerMap, Key.UpArrow, incrementValueLower), _defineProperty(_handlerMap, Key.RightArrow, incrementValueLower), _defineProperty(_handlerMap, Key.DownArrow, decrementValueLower), _defineProperty(_handlerMap, Key.LeftArrow, decrementValueLower), _handlerMap);\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    _this.handleKeypressUpper = function (event) {\n      var _handlerMap2;\n\n      if (_this.props.disabled) return;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          incrementValueUpper = _assertThisInitialize2.incrementValueUpper,\n          decrementValueUpper = _assertThisInitialize2.decrementValueUpper;\n\n      var handlerMap = (_handlerMap2 = {}, _defineProperty(_handlerMap2, Key.UpArrow, incrementValueUpper), _defineProperty(_handlerMap2, Key.RightArrow, incrementValueUpper), _defineProperty(_handlerMap2, Key.DownArrow, decrementValueUpper), _defineProperty(_handlerMap2, Key.LeftArrow, decrementValueUpper), _handlerMap2);\n      var handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    _this.incrementValueLower = function () {\n      _this.setValue([_this.state.value[0] + _this.props.step, _this.state.value[1]], Control.Upper);\n    };\n\n    _this.decrementValueLower = function () {\n      _this.setValue([_this.state.value[0] - _this.props.step, _this.state.value[1]], Control.Upper);\n    };\n\n    _this.incrementValueUpper = function () {\n      _this.setValue([_this.state.value[0], _this.state.value[1] + _this.props.step], Control.Lower);\n    };\n\n    _this.decrementValueUpper = function () {\n      _this.setValue([_this.state.value[0], _this.state.value[1] - _this.props.step], Control.Lower);\n    };\n\n    _this.dispatchValue = function () {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          id = _this$props.id;\n      var value = _this.state.value;\n      onChange(value, id);\n    };\n\n    _this.setValue = function (dirtyValue, control) {\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          _assertThisInitialize4 = _assertThisInitialize3.props,\n          min = _assertThisInitialize4.min,\n          max = _assertThisInitialize4.max,\n          step = _assertThisInitialize4.step,\n          value = _assertThisInitialize3.state.value;\n\n      var sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual(sanitizedValue, value) === false) {\n        _this.setState({\n          value: sanitizedValue\n        }, _this.dispatchValue);\n      }\n    };\n\n    _this.handleMouseDownTrack = function (event) {\n      if (event.button !== 0 || _this.props.disabled) return;\n      event.preventDefault();\n\n      var clickXPosition = _this.actualXPosition(event.clientX);\n\n      var value = _this.state.value;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        _this.setValue([clickXPosition, value[1]], Control.Upper);\n\n        registerMouseMoveHandler(_this.handleMouseMoveThumbLower);\n\n        if (_this.thumbLower.current != null) {\n          _this.thumbLower.current.focus();\n        }\n      } else {\n        _this.setValue([value[0], clickXPosition], Control.Lower);\n\n        registerMouseMoveHandler(_this.handleMouseMoveThumbUpper);\n\n        if (_this.thumbUpper.current != null) {\n          _this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    _this.handleTouchStartTrack = function (event) {\n      if (_this.props.disabled) return;\n      event.preventDefault();\n\n      var clickXPosition = _this.actualXPosition(event.touches[0].clientX);\n\n      var value = _this.state.value;\n      var distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      var distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        _this.setValue([clickXPosition, value[1]], Control.Upper);\n\n        registerTouchMoveHandler(_this.handleTouchMoveThumbLower);\n\n        if (_this.thumbLower.current != null) {\n          _this.thumbLower.current.focus();\n        }\n      } else {\n        _this.setValue([value[0], clickXPosition], Control.Lower);\n\n        registerTouchMoveHandler(_this.handleTouchMoveThumbUpper);\n\n        if (_this.thumbUpper.current != null) {\n          _this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    _this.actualXPosition = function (dirtyXPosition) {\n      if (_this.track.current) {\n        var _this$props2 = _this.props,\n            min = _this$props2.min,\n            max = _this$props2.max;\n        var _this$state = _this.state,\n            trackLeft = _this$state.trackLeft,\n            trackWidth = _this$state.trackWidth;\n        var relativeX = dirtyXPosition - trackLeft;\n        var percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(DualThumb, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setTrackPosition();\n\n      if (this.trackWrapper.current != null) {\n        this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n          passive: false\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.trackWrapper.current != null) {\n        this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          id = _this$props3.id,\n          min = _this$props3.min,\n          max = _this$props3.max,\n          prefix = _this$props3.prefix,\n          suffix = _this$props3.suffix,\n          disabled = _this$props3.disabled,\n          output = _this$props3.output,\n          error = _this$props3.error,\n          onFocus = _this$props3.onFocus,\n          onBlur = _this$props3.onBlur,\n          label = _this$props3.label,\n          labelAction = _this$props3.labelAction,\n          labelHidden = _this$props3.labelHidden,\n          helpText = _this$props3.helpText;\n      var value = this.state.value;\n      var idLower = id;\n      var idUpper = \"\".concat(id, \"Upper\");\n      var describedBy = [];\n\n      if (error) {\n        describedBy.push(\"\".concat(id, \"Error\"));\n      }\n\n      var ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n      var trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n      var thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n      var thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n      var trackWidth = this.state.trackWidth;\n      var range = max - min;\n      var minValuePosition = min / range * trackWidth;\n      var leftPositionThumbLower = value[0] / range * trackWidth - minValuePosition;\n      var leftPositionThumbUpper = value[1] / range * trackWidth - minValuePosition;\n      var outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n      var outputMarkupLower = !disabled && output ? /*#__PURE__*/React.createElement(\"output\", {\n        htmlFor: idLower,\n        className: outputLowerClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbLower, \"px\")\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.OutputBubble\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: styles.OutputText\n      }, value[0]))) : null;\n      var outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n      var outputMarkupUpper = !disabled && output ? /*#__PURE__*/React.createElement(\"output\", {\n        htmlFor: idUpper,\n        className: outputUpperClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbUpper, \"px\")\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.OutputBubble\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: styles.OutputText\n      }, value[1]))) : null;\n      var cssVars = {\n        '--pc-range-slider-progress-lower': \"\".concat(leftPositionThumbLower, \"px\"),\n        '--pc-range-slider-progress-upper': \"\".concat(leftPositionThumbUpper, \"px\")\n      };\n      var prefixMarkup = prefix && /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.Prefix\n      }, prefix);\n      var suffixMarkup = suffix && /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.Suffix\n      }, suffix);\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Labelled, {\n        id: id,\n        label: label,\n        error: error,\n        action: labelAction,\n        labelHidden: labelHidden,\n        helpText: helpText\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(styles.DualThumb, sharedStyles.RangeSlider)\n      }, prefixMarkup, /*#__PURE__*/React.createElement(\"div\", {\n        className: trackWrapperClassName,\n        onMouseDown: this.handleMouseDownTrack,\n        ref: this.trackWrapper\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.Track,\n        style: cssVars,\n        ref: this.track\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: styles['Track--dashed']\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        id: idLower,\n        className: thumbLowerClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbLower, \"px\")\n        },\n        role: \"slider\",\n        \"aria-disabled\": disabled,\n        \"aria-valuemin\": min,\n        \"aria-valuemax\": max,\n        \"aria-valuenow\": value[0],\n        \"aria-invalid\": Boolean(error),\n        \"aria-describedby\": ariaDescribedBy,\n        \"aria-labelledby\": labelID(id),\n        onFocus: onFocus,\n        onBlur: onBlur,\n        tabIndex: 0,\n        onKeyDown: this.handleKeypressLower,\n        onMouseDown: this.handleMouseDownThumbLower,\n        onTouchStart: this.handleTouchStartThumbLower,\n        ref: this.thumbLower\n      }), outputMarkupLower, /*#__PURE__*/React.createElement(\"div\", {\n        id: idUpper,\n        className: thumbUpperClassName,\n        style: {\n          left: \"\".concat(leftPositionThumbUpper, \"px\")\n        },\n        role: \"slider\",\n        \"aria-disabled\": disabled,\n        \"aria-valuemin\": min,\n        \"aria-valuemax\": max,\n        \"aria-valuenow\": value[1],\n        \"aria-invalid\": Boolean(error),\n        \"aria-describedby\": ariaDescribedBy,\n        \"aria-labelledby\": labelID(id),\n        onFocus: onFocus,\n        onBlur: onBlur,\n        tabIndex: 0,\n        onKeyDown: this.handleKeypressUpper,\n        onMouseDown: this.handleMouseDownThumbUpper,\n        onTouchStart: this.handleTouchStartThumbUpper,\n        ref: this.thumbUpper\n      }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React.createElement(EventListener, {\n        event: \"resize\",\n        handler: this.setTrackPosition\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var min = props.min,\n          step = props.step,\n          max = props.max,\n          value = props.value,\n          onChange = props.onChange,\n          id = props.id;\n      var prevValue = state.prevValue;\n\n      if (isEqual(prevValue, value)) {\n        return null;\n      }\n\n      var sanitizedValue = sanitizeValue(value, min, max, step);\n\n      if (!isEqual(value, sanitizedValue)) {\n        onChange(sanitizedValue, id);\n      }\n\n      return {\n        prevValue: value,\n        value: sanitizedValue\n      };\n    }\n  }]);\n\n  return DualThumb;\n}(Component);\n\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', function () {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  var removeHandler = function removeHandler() {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step) {\n  var control = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Control.Upper;\n  var upperValue = inBoundsUpper(roundedToStep(value[1]));\n  var lowerValue = inBoundsLower(roundedToStep(value[0]));\n  var maxLowerValue = upperValue - step;\n  var minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    var lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    var upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/RangeSlider/components/DualThumb/DualThumb.js"],"names":["React","Component","createRef","debounce","isEqual","classNames","Key","sharedStyles","styles","Labelled","labelID","EventListener","FeaturesContext","Control","DualThumb","args","context","state","value","sanitizeValue","props","min","max","step","trackWidth","trackLeft","track","trackWrapper","thumbLower","thumbUpper","setTrackPosition","current","thumbSize","getBoundingClientRect","width","left","adjustedTrackWidth","adjustedTrackLeft","range","minValuePosition","setState","leading","trailing","maxWait","handleMouseDownThumbLower","event","button","disabled","registerMouseMoveHandler","handleMouseMoveThumbLower","stopPropagation","valueUpper","setValue","actualXPosition","clientX","Upper","handleTouchStartThumbLower","registerTouchMoveHandler","handleTouchMoveThumbLower","preventDefault","touches","handleMouseDownThumbUpper","handleMouseMoveThumbUpper","valueLower","Lower","handleTouchStartThumbUpper","handleTouchMoveThumbUpper","handleKeypressLower","incrementValueLower","decrementValueLower","handlerMap","UpArrow","RightArrow","DownArrow","LeftArrow","handler","keyCode","handleKeypressUpper","incrementValueUpper","decrementValueUpper","dispatchValue","onChange","id","dirtyValue","control","sanitizedValue","handleMouseDownTrack","clickXPosition","distanceFromLowerThumb","Math","abs","distanceFromUpperThumb","focus","handleTouchStartTrack","dirtyXPosition","relativeX","percentageOfTrack","addEventListener","passive","removeEventListener","prefix","suffix","output","error","onFocus","onBlur","label","labelAction","labelHidden","helpText","idLower","idUpper","describedBy","push","ariaDescribedBy","length","join","undefined","trackWrapperClassName","TrackWrapper","thumbLowerClassName","Thumbs","ThumbLower","thumbUpperClassName","ThumbUpper","leftPositionThumbLower","leftPositionThumbUpper","outputLowerClassName","Output","OutputLower","outputMarkupLower","createElement","htmlFor","className","style","OutputBubble","OutputText","outputUpperClassName","OutputUpper","outputMarkupUpper","cssVars","prefixMarkup","Prefix","suffixMarkup","Suffix","Fragment","action","RangeSlider","onMouseDown","ref","Track","role","Boolean","tabIndex","onKeyDown","onTouchStart","prevValue","contextType","document","once","removeHandler","upperValue","inBoundsUpper","roundedToStep","lowerValue","inBoundsLower","maxLowerValue","minUpperValue","lowerMin","upperMax","round"],"mappings":"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","sourcesContent":["import React, { Component, createRef } from 'react';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Key } from '../../../../types.js';\nimport sharedStyles from '../../RangeSlider.scss.js';\nimport styles from './DualThumb.scss.js';\nimport { Labelled } from '../../../Labelled/Labelled.js';\nimport { labelID } from '../../../Label/Label.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nimport { FeaturesContext } from '../../../../utilities/features/context.js';\n\nvar Control;\n\n(function (Control) {\n  Control[Control[\"Lower\"] = 0] = \"Lower\";\n  Control[Control[\"Upper\"] = 1] = \"Upper\";\n})(Control || (Control = {}));\n\nclass DualThumb extends Component {\n  constructor(...args) {\n    super(...args);\n    this.context = void 0;\n    this.state = {\n      value: sanitizeValue(this.props.value, this.props.min, this.props.max, this.props.step),\n      trackWidth: 0,\n      trackLeft: 0\n    };\n    this.track = /*#__PURE__*/createRef();\n    this.trackWrapper = /*#__PURE__*/createRef();\n    this.thumbLower = /*#__PURE__*/createRef();\n    this.thumbUpper = /*#__PURE__*/createRef();\n    this.setTrackPosition = debounce(() => {\n      if (this.track.current) {\n        const thumbSize = 16;\n        const {\n          width,\n          left\n        } = this.track.current.getBoundingClientRect();\n        const adjustedTrackWidth = width - thumbSize;\n        const adjustedTrackLeft = left + thumbSize / 2;\n        const range = this.props.max - this.props.min;\n        const minValuePosition = this.props.min / range * adjustedTrackWidth;\n        this.setState({\n          trackWidth: adjustedTrackWidth,\n          trackLeft: adjustedTrackLeft - minValuePosition\n        });\n      }\n    }, 40, {\n      leading: true,\n      trailing: true,\n      maxWait: 40\n    });\n\n    this.handleMouseDownThumbLower = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbLower = event => {\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleTouchStartThumbLower = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbLower = event => {\n      event.preventDefault();\n      const valueUpper = this.state.value[1];\n      this.setValue([this.actualXPosition(event.touches[0].clientX), valueUpper], Control.Upper);\n    };\n\n    this.handleMouseDownThumbUpper = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleMouseMoveThumbUpper = event => {\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.clientX)], Control.Lower);\n    };\n\n    this.handleTouchStartThumbUpper = event => {\n      if (this.props.disabled) return;\n      registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n      event.stopPropagation();\n    };\n\n    this.handleTouchMoveThumbUpper = event => {\n      event.preventDefault();\n      const valueLower = this.state.value[0];\n      this.setValue([valueLower, this.actualXPosition(event.touches[0].clientX)], Control.Lower);\n    };\n\n    this.handleKeypressLower = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueLower,\n        decrementValueLower\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueLower,\n        [Key.RightArrow]: incrementValueLower,\n        [Key.DownArrow]: decrementValueLower,\n        [Key.LeftArrow]: decrementValueLower\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.handleKeypressUpper = event => {\n      if (this.props.disabled) return;\n      const {\n        incrementValueUpper,\n        decrementValueUpper\n      } = this;\n      const handlerMap = {\n        [Key.UpArrow]: incrementValueUpper,\n        [Key.RightArrow]: incrementValueUpper,\n        [Key.DownArrow]: decrementValueUpper,\n        [Key.LeftArrow]: decrementValueUpper\n      };\n      const handler = handlerMap[event.keyCode];\n\n      if (handler != null) {\n        event.preventDefault();\n        event.stopPropagation();\n        handler();\n      }\n    };\n\n    this.incrementValueLower = () => {\n      this.setValue([this.state.value[0] + this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.decrementValueLower = () => {\n      this.setValue([this.state.value[0] - this.props.step, this.state.value[1]], Control.Upper);\n    };\n\n    this.incrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] + this.props.step], Control.Lower);\n    };\n\n    this.decrementValueUpper = () => {\n      this.setValue([this.state.value[0], this.state.value[1] - this.props.step], Control.Lower);\n    };\n\n    this.dispatchValue = () => {\n      const {\n        onChange,\n        id\n      } = this.props;\n      const {\n        value\n      } = this.state;\n      onChange(value, id);\n    };\n\n    this.setValue = (dirtyValue, control) => {\n      const {\n        props: {\n          min,\n          max,\n          step\n        },\n        state: {\n          value\n        }\n      } = this;\n      const sanitizedValue = sanitizeValue(dirtyValue, min, max, step, control);\n\n      if (isEqual(sanitizedValue, value) === false) {\n        this.setState({\n          value: sanitizedValue\n        }, this.dispatchValue);\n      }\n    };\n\n    this.handleMouseDownTrack = event => {\n      if (event.button !== 0 || this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerMouseMoveHandler(this.handleMouseMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerMouseMoveHandler(this.handleMouseMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.handleTouchStartTrack = event => {\n      if (this.props.disabled) return;\n      event.preventDefault();\n      const clickXPosition = this.actualXPosition(event.touches[0].clientX);\n      const {\n        value\n      } = this.state;\n      const distanceFromLowerThumb = Math.abs(value[0] - clickXPosition);\n      const distanceFromUpperThumb = Math.abs(value[1] - clickXPosition);\n\n      if (distanceFromLowerThumb <= distanceFromUpperThumb) {\n        this.setValue([clickXPosition, value[1]], Control.Upper);\n        registerTouchMoveHandler(this.handleTouchMoveThumbLower);\n\n        if (this.thumbLower.current != null) {\n          this.thumbLower.current.focus();\n        }\n      } else {\n        this.setValue([value[0], clickXPosition], Control.Lower);\n        registerTouchMoveHandler(this.handleTouchMoveThumbUpper);\n\n        if (this.thumbUpper.current != null) {\n          this.thumbUpper.current.focus();\n        }\n      }\n    };\n\n    this.actualXPosition = dirtyXPosition => {\n      if (this.track.current) {\n        const {\n          min,\n          max\n        } = this.props;\n        const {\n          trackLeft,\n          trackWidth\n        } = this.state;\n        const relativeX = dirtyXPosition - trackLeft;\n        const percentageOfTrack = relativeX / trackWidth;\n        return percentageOfTrack * (max - min);\n      } else {\n        return 0;\n      }\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    const {\n      min,\n      step,\n      max,\n      value,\n      onChange,\n      id\n    } = props;\n    const {\n      prevValue\n    } = state;\n\n    if (isEqual(prevValue, value)) {\n      return null;\n    }\n\n    const sanitizedValue = sanitizeValue(value, min, max, step);\n\n    if (!isEqual(value, sanitizedValue)) {\n      onChange(sanitizedValue, id);\n    }\n\n    return {\n      prevValue: value,\n      value: sanitizedValue\n    };\n  }\n\n  componentDidMount() {\n    this.setTrackPosition();\n\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.addEventListener('touchstart', this.handleTouchStartTrack, {\n        passive: false\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.trackWrapper.current != null) {\n      this.trackWrapper.current.removeEventListener('touchstart', this.handleTouchStartTrack);\n    }\n  }\n\n  render() {\n    const {\n      id,\n      min,\n      max,\n      prefix,\n      suffix,\n      disabled,\n      output,\n      error,\n      onFocus,\n      onBlur,\n      label,\n      labelAction,\n      labelHidden,\n      helpText\n    } = this.props;\n    const {\n      value\n    } = this.state;\n    const idLower = id;\n    const idUpper = `${id}Upper`;\n    const describedBy = [];\n\n    if (error) {\n      describedBy.push(`${id}Error`);\n    }\n\n    const ariaDescribedBy = describedBy.length ? describedBy.join(' ') : undefined;\n    const trackWrapperClassName = classNames(styles.TrackWrapper, error && styles.error, disabled && styles.disabled);\n    const thumbLowerClassName = classNames(styles.Thumbs, styles.ThumbLower, disabled && styles.disabled);\n    const thumbUpperClassName = classNames(styles.Thumbs, styles.ThumbUpper, disabled && styles.disabled);\n    const trackWidth = this.state.trackWidth;\n    const range = max - min;\n    const minValuePosition = min / range * trackWidth;\n    const leftPositionThumbLower = value[0] / range * trackWidth - minValuePosition;\n    const leftPositionThumbUpper = value[1] / range * trackWidth - minValuePosition;\n    const outputLowerClassName = classNames(styles.Output, styles.OutputLower);\n    const outputMarkupLower = !disabled && output ? /*#__PURE__*/React.createElement(\"output\", {\n      htmlFor: idLower,\n      className: outputLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[0]))) : null;\n    const outputUpperClassName = classNames(styles.Output, styles.OutputUpper);\n    const outputMarkupUpper = !disabled && output ? /*#__PURE__*/React.createElement(\"output\", {\n      htmlFor: idUpper,\n      className: outputUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.OutputBubble\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.OutputText\n    }, value[1]))) : null;\n    const cssVars = {\n      '--pc-range-slider-progress-lower': `${leftPositionThumbLower}px`,\n      '--pc-range-slider-progress-upper': `${leftPositionThumbUpper}px`\n    };\n    const prefixMarkup = prefix && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Prefix\n    }, prefix);\n    const suffixMarkup = suffix && /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Suffix\n    }, suffix);\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Labelled, {\n      id: id,\n      label: label,\n      error: error,\n      action: labelAction,\n      labelHidden: labelHidden,\n      helpText: helpText\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames(styles.DualThumb, sharedStyles.RangeSlider)\n    }, prefixMarkup, /*#__PURE__*/React.createElement(\"div\", {\n      className: trackWrapperClassName,\n      onMouseDown: this.handleMouseDownTrack,\n      ref: this.trackWrapper\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Track,\n      style: cssVars,\n      ref: this.track\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: styles['Track--dashed']\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: idLower,\n      className: thumbLowerClassName,\n      style: {\n        left: `${leftPositionThumbLower}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[0],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressLower,\n      onMouseDown: this.handleMouseDownThumbLower,\n      onTouchStart: this.handleTouchStartThumbLower,\n      ref: this.thumbLower\n    }), outputMarkupLower, /*#__PURE__*/React.createElement(\"div\", {\n      id: idUpper,\n      className: thumbUpperClassName,\n      style: {\n        left: `${leftPositionThumbUpper}px`\n      },\n      role: \"slider\",\n      \"aria-disabled\": disabled,\n      \"aria-valuemin\": min,\n      \"aria-valuemax\": max,\n      \"aria-valuenow\": value[1],\n      \"aria-invalid\": Boolean(error),\n      \"aria-describedby\": ariaDescribedBy,\n      \"aria-labelledby\": labelID(id),\n      onFocus: onFocus,\n      onBlur: onBlur,\n      tabIndex: 0,\n      onKeyDown: this.handleKeypressUpper,\n      onMouseDown: this.handleMouseDownThumbUpper,\n      onTouchStart: this.handleTouchStartThumbUpper,\n      ref: this.thumbUpper\n    }), outputMarkupUpper), suffixMarkup)), /*#__PURE__*/React.createElement(EventListener, {\n      event: \"resize\",\n      handler: this.setTrackPosition\n    }));\n  }\n\n}\nDualThumb.contextType = FeaturesContext;\n\nfunction registerMouseMoveHandler(handler) {\n  document.addEventListener('mousemove', handler);\n  document.addEventListener('mouseup', () => {\n    document.removeEventListener('mousemove', handler);\n  }, {\n    once: true\n  });\n}\n\nfunction registerTouchMoveHandler(handler) {\n  const removeHandler = () => {\n    document.removeEventListener('touchmove', handler);\n    document.removeEventListener('touchend', removeHandler);\n    document.removeEventListener('touchcancel', removeHandler);\n  };\n\n  document.addEventListener('touchmove', handler, {\n    passive: false\n  });\n  document.addEventListener('touchend', removeHandler, {\n    once: true\n  });\n  document.addEventListener('touchcancel', removeHandler, {\n    once: true\n  });\n}\n\nfunction sanitizeValue(value, min, max, step, control = Control.Upper) {\n  let upperValue = inBoundsUpper(roundedToStep(value[1]));\n  let lowerValue = inBoundsLower(roundedToStep(value[0]));\n  const maxLowerValue = upperValue - step;\n  const minUpperValue = lowerValue + step;\n\n  if (control === Control.Upper && lowerValue > maxLowerValue) {\n    lowerValue = maxLowerValue;\n  } else if (control === Control.Lower && upperValue < minUpperValue) {\n    upperValue = minUpperValue;\n  }\n\n  return [lowerValue, upperValue];\n\n  function inBoundsUpper(value) {\n    const lowerMin = min + step;\n\n    if (value < lowerMin) {\n      return lowerMin;\n    } else if (value > max) {\n      return max;\n    } else {\n      return value;\n    }\n  }\n\n  function inBoundsLower(value) {\n    const upperMax = max - step;\n\n    if (value < min) {\n      return min;\n    } else if (value > upperMax) {\n      return upperMax;\n    } else {\n      return value;\n    }\n  }\n\n  function roundedToStep(value) {\n    return Math.round(value / step) * step;\n  }\n}\n\nexport { DualThumb };\n"]},"metadata":{},"sourceType":"module"}