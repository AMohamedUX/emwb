{"ast":null,"code":"import React, { useRef, useEffect, useCallback, useLayoutEffect } from 'react';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nfunction Resizer(_ref) {\n  var contents = _ref.contents,\n      _ref$currentHeight = _ref.currentHeight,\n      currentHeightProp = _ref$currentHeight === void 0 ? null : _ref$currentHeight,\n      minimumLines = _ref.minimumLines,\n      onHeightChange = _ref.onHeightChange;\n  var contentNode = useRef(null);\n  var minimumLinesNode = useRef(null);\n  var animationFrame = useRef();\n  var currentHeight = useRef(currentHeightProp);\n\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n\n  useEffect(function () {\n    return function () {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  var minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  var handleHeightCheck = useCallback(function () {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n\n    animationFrame.current = requestAnimationFrame(function () {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n\n      var newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useLayoutEffect(function () {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\n\nvar ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nvar REPLACE_REGEX = new RegExp(\"[\".concat(Object.keys(ENTITIES_TO_REPLACE).join(), \"]\"), 'g');\n\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\n\nfunction getContentsForMinimumLines(minimumLines) {\n  var content = '';\n\n  for (var line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n\n  return content;\n}\n\nfunction getFinalContents(contents) {\n  return contents ? \"\".concat(contents.replace(REPLACE_REGEX, replaceEntity), \"<br>\") : '<br>';\n}\n\nexport { Resizer };","map":{"version":3,"sources":["/Users/ayubmohamed/emwb/node_modules/@shopify/polaris/build/esm/components/TextField/components/Resizer/Resizer.js"],"names":["React","useRef","useEffect","useCallback","useLayoutEffect","styles","EventListener","Resizer","contents","currentHeight","currentHeightProp","minimumLines","onHeightChange","contentNode","minimumLinesNode","animationFrame","current","cancelAnimationFrame","minimumLinesMarkup","createElement","ref","className","DummyInput","dangerouslySetInnerHTML","__html","getContentsForMinimumLines","handleHeightCheck","requestAnimationFrame","newHeight","Math","max","offsetHeight","event","handler","getFinalContents","ENTITIES_TO_REPLACE","REPLACE_REGEX","RegExp","Object","keys","join","replaceEntity","entity","content","line","replace"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useCallback, useLayoutEffect } from 'react';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nfunction Resizer({\n  contents,\n  currentHeight: currentHeightProp = null,\n  minimumLines,\n  onHeightChange\n}) {\n  const contentNode = useRef(null);\n  const minimumLinesNode = useRef(null);\n  const animationFrame = useRef();\n  const currentHeight = useRef(currentHeightProp);\n\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  const minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  const handleHeightCheck = useCallback(() => {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n\n    animationFrame.current = requestAnimationFrame(() => {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n\n      const newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useLayoutEffect(() => {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\nconst ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nconst REPLACE_REGEX = new RegExp(`[${Object.keys(ENTITIES_TO_REPLACE).join()}]`, 'g');\n\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\n\nfunction getContentsForMinimumLines(minimumLines) {\n  let content = '';\n\n  for (let line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n\n  return content;\n}\n\nfunction getFinalContents(contents) {\n  return contents ? `${contents.replace(REPLACE_REGEX, replaceEntity)}<br>` : '<br>';\n}\n\nexport { Resizer };\n"]},"metadata":{},"sourceType":"module"}